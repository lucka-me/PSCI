<!DOCTYPE html>
<html>
    <meta charset="utf-8" />
    <head>
        <title>Potori | Intro</title>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <!-- Stylesheet -->
        <link type="text/css" rel="stylesheet" href="https://lucka.moe/toolkit/css/common.css" />
        <link type="text/css" rel="stylesheet" href="../css/extended.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
            integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"
        />
    </head>
    <body>
        <div class="flex-box bg-primary fullwidth">
            <div class="flex-box frame-16 flex-justify-c">
                <a href="../"><img class="logo" src="../src/logo.svg"></img></a>
                <h1 class="textwhite margin-left-8">Intro</h1>
            </div>
        </div>

        <div class="flex-box">
            <div class="frame-16">
                <p>
                    Potori is a web application to visualize your Ingress Portal nominations.<br/>
                    Potori will obtain your mails related to Portal nominations from your Gmail inbox, so you must login with your account to use it.
                </p>
                <h2>Permission</h2>
                <p>
                    Potori requires the following permission:
                    <ul>
                        <li>
                            <b>Gmail: Read Only</b> (Required)<br/>
                            This is the core permission on which Potori is dependent. Potori will obtain mails related to Ingress Portal nomination, then extract and display informations from them. The mail IDs will be saved in data file if you save / upload the data file in your computer / your Google Drive. Except that, non of your mail data will be sent out of your browser page.
                        </li>
                        <li>
                            <b>Google Drive: Files</b> (Recommended)<br/>
                            Potori could upload your nomination data to your Google Drive manually, and after login, Potori will download the data. By using the data file, Potori will not obtain and process all mails every time, which could reduce the network traffic and time useage. The file will be storaged in a private app folder where only Potori can access.
                        </li>
                    </ul>
                </p>
                <h2>Workflow</h2>
                <p>
                    This part will describe how Potori works.<br/>
                    For those mails related to Portal nominations, the subjects and contents are generated from several templates, some keywords are used to filter mails and extract informations.<br/>
                </p>
                <ol>
                    <li>
                        <b>Download / Open the nomination data file</b><br/>
                        If you have saved a nomination data file, you can open it to review your nominations without login.<br/>
                        After login, Potori will try to download nomination data from your Google Drive if you have uploaded before.
                    </li>
                    <li>
                        <b>Obtain the target mails with filters</b><br/>
                        Potori will obtain mails with the following filters:<br/>
                        <table>
                            <tr>
                                <td class="at-r">Confirmation mails:</td>
                                <td>
                                    <code>from:ingress-support@nianticlabs.com Portal submission confirmation -edit -photo</code><br/>
                                    <code>from:nominations@portals.ingress.com ?????</code>
                                </td>
                            </tr>
                            <tr>
                                <td class="at-r">Acceptance mails:</td>
                                <td>
                                    <code>from:ingress-support@nianticlabs.com Portal review complete now available -edit -photo</code><br/>
                                    <code>from:nominations@portals.ingress.com Intel Map AP</code>
                                </td>
                            </tr>
                            <tr>
                                <td class="at-r">Rejection mails:</td>
                                <td>
                                    <code>from:ingress-support@nianticlabs.com Portal review complete reviewed -edit -photo</code><br/>
                                    <code>from:nominations@portals.ingress.com ??: -AP</code>
                                </td>
                            </tr>
                        </table>
                        <i>Tips: You can also create rules with these filter to label your mails automatically in Gmail.</i>
                    </li>
                    <li>
                        <b>Extract informations from the mails</b><br/>
                        <ul>
                            <li>
                                The <i>mail ID</i> could be used to avoid obtaining and processing the same mail in the next time, if you save / upload the data file.
                            </li>
                            <li>
                                The <i>subject</i> contains the <b>title</b> of the Portal.
                            </li>
                            <li>
                                The <i>timestamp</i> could be regarded as the <b>confirmation/acceptance/rejection time</b> of the Portal nomination.
                            </li>
                            <li>
                                The photo of the Portal is included in each mail, with its url in this format: <code>https://lh3.googleusercontent.com/a-very-long-uid</code><br/>
                                The <i>very long uid</i> is important: it's used to not only show the photo along with the card, but also generate a <b>shorter uid</b>, a hash code, to identify the same Portal from different mails (such as confirmation mail and acceptance mail).<br/>
                                Besides, the <b>shorter uid</b> could link to the data page (called <i>Watermeter</i>) in Brainstorming, a wondeful plugin for Ingress OPR, which may show you the opinions from some OPR volunteers who use the plugin.
                            </li>
                            <li>
                                In the result mails (acceptance and rejection mails) from Scanner [REDACTED], there is always an <i>Intel Map link</i>, which contains the <b>coordinate of the Portal</b>. Potori will extract the <b>coordinate</b> and display a <b>marker</b> on the map.<br/>
                                For those Portals without coordinates (including pending nominations and <b>all nominations from Prime</b>) Potori will query the data from Brainstorming Firedase. The query is anoymous, Potori will not send or save your identity.
                            </li>
                            <li>
                                As for the rejection mails, there are three templates (as I known so far) for each rejection reason, and each one colud be identified by matching the key words:
                                <table>
                                    <tr>
                                        <td class="at-r">Duplicated: </td>
                                        <td><code>duplicate of either an existing Portal</code></td>
                                    </tr>
                                    <tr>
                                        <td class="at-r">Too close:</td>
                                        <td><code>too close to an existing Portal</code></td>
                                    </tr>
                                    <tr>
                                        <td class="at-r">Undeclared:</td>
                                        <td>(Match neither of the keywords above)</td>
                                    </tr>
                                </table>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <b>Save / upload the nomination data file</b><br/>
                        You can save the nomination data to your computer by clicking the <span><i class="fas fa-save fa-fw fa-lg"></i></span> button, a file called <code>Potori.json</code> will be downloaded.<br/>
                        The nomination data will <b>NOT</b> be uploaded to your Google Drive automatically. If you have login, you can upload the data by clicking the <span><i class="fas fa-cloud-upload-alt fa-fw fa-lg"></i></span> button.
                    </li>
                </ol>
                <p>
                    That's how Potori gets information of your Portal nominations from your inbox. Ingress Prime uses localized templates, which makes it difficult to find the corrent keywords, I'm working on it.
                </p>
                <h2>Useage</h2>
                <p>
                    After login, the process will start automatically, the status bar will display the progress.<br>
                    When it finishes, your nominations will be displayed as cards in the list and markers on the map, here is an example of the card:
                </p>
                <div style="max-width:500px;" >
                    <div class="list-item">
                        <img id="portalImg" src="https://lh3.googleusercontent.com/lniXADGbXbvQ4p3sJFpgMPT6zpawXGmI3V9mYMsSNNTY9YHn1hjV3BAolzYAtBis0Msst1KM-_FBKQdRfsFM">
                        <div class="card">
                            <div class="frame-12 flex-box flex-dir-col">
                                <div class="flex-box fullwidth a-c">
                                    <a href="https://www.ingress.com/intel?ll=22.540779,114.051921&amp;amp;z=18" target="_blank" class="font-20" id="portalTitleLink">福田站</a>
                                    <div class="split"></div>
                                    <a href="http://kitten-114.getforge.io/watermeter.html#fbkqdrfsfm" target="_blank" id="bsLink">
                                        <div>
                                            <span class="fa-stack status-accepted" id="statusIconSpan">
                                                <i class="fas fa-circle fa-stack-2x" style="vertical-align: top;"></i>
                                                <i class="fas fa-check fa-stack-1x fa-inverse" id="statusIconStack"></i>
                                            </span>
                                        </div>
                                    </a>
                                </div>
                                <div style="height:8px;width:100%;"></div>
                                <div class="flex-box flex-dir-col fullwidth">
                                    <div class="flex-box a-c margin-right-8">
                                        <i class="fas fa-cloud-upload-alt fa-fw"></i>
                                        <div class="margin-left-4">2019/2/2</div>
                                    </div>
                                    <div class="flex-box a-c margin-right-8">
                                        <i class="fas fa-clock fa-fw"></i>
                                        <div class="margin-left-4">25 days</div>
                                    </div>
                                    <div class="flex-box a-c">
                                        <i class="fas fa-check fa-fw"></i>
                                        <div class="margin-left-4">2019/2/27</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <ul>
                    <li>
                        When click the card, the map will fly to the corresponding location.<br/>
                        And when click the marker, the list will scroll to the corresponding card.
                    </li>
                    <li>The title is linked to the Intel Map.</li>
                    <li>
                        The status icon <span class="fa-stack status-accepted"><i class="fas fa-circle fa-stack-2x" style="vertical-align: top;"></i><i class="fas fa-check fa-stack-1x fa-inverse"></i></span> is linked to the Brainstorming Watermeter, and the icon will display the reason if the nomination is rejected.
                    </li>
                </ul>
                <p>
                    Moreover, you can hide some nominations by uncheck the filter in the status bar.
                </p>
                <h2>Data Useage & Privacy</h2>
                <p>
                    Briefly, Potori would not collect or upload any of your data, for more information, please read <a class="link" href="../privacy" title="Potori | Privacy Policy">Privacy Policy</a>.
                </p>
                <h2>Contact</h2>
                <p>
                    If you have any question, advice or want to help me improve Potori, please feel free to contact me directly via <a class="link" href="https://t.me/Seele585" title="Telegram@Seele585">Telegram</a>!
                </p>
            </div>
        </div>

        <div class="footer">
            <div class=" frame-16">
                <div class="flex-box text-nowarp a-baseline">
                    <a class="footer-item" href="../privacy" target="_blank" title="Privacy Policy" >Privacy</a>
                    <a class="footer-item" href="https://github.com/lucka-me/PSCI" title="GitHub">
                        <i class="fab fa-github fa-lg"></i>
                    </a>
                    <a class="footer-item" href="https://lucka.moe" target="_blank" title="Blog" >Lucka</a>
                    |
                    <a class="footer-item" href="https://github.com/lucka-me/PSCI/blob/master/CHANGELOG.md" target="_blank" title="Changelog">0.3.0</a>
                </div>
            </div>
        </div>
    </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{0:function(e,t,n){"use strict";function a(e,t,n){const a=document.createElement(e);for(const[e,n]of Object.entries(t))switch(e){case"cssText":a.style.cssText=n;break;case"dataset":for(const[e,t]of Object.entries(n))a.dataset[e]=t;break;default:a[e]=n}return n&&a.append(...n),a}n.d(t,"a",(function(){return a})),function(e){e.copy=function(t){const n=e("textarea",{value:t,readOnly:!0});document.body.append(n),n.select(),document.execCommand("copy"),n.remove()}}(a||(a={}))},10:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(0);n(33);const i="mdc-dialog",s="mdc-dialog__container",o="mdc-dialog__surface",r="mdc-dialog__content",c="mdc-dialog__title",l="mdc-dialog__actions",u="mdc-dialog__scrim",d="mdc-button mdc-dialog__button",p="mdc-button__ripple",m="mdc-button__label";function h(e,t){const n=[];return t.title&&n.push(Object(a.a)("h2",{className:c,innerHTML:t.title})),n.push(Object(a.a)("div",{className:r},t.contents)),t.actions&&n.push(Object(a.a)("footer",{className:l},t.actions.map((e=>Object(a.a)("button",{className:d,dataset:{mdcDialogAction:e.action}},[Object(a.a)("div",{className:p}),Object(a.a)("span",{className:m,innerHTML:e.text})]))))),Object(a.a)("div",{className:`${i} ${e}`,role:"dialog",ariaModal:!0},[Object(a.a)("div",{className:s},[Object(a.a)("div",{className:o},n)]),Object(a.a)("div",{className:u})])}(h||(h={})).link=function(e,t,n){return Object(a.a)("a",{href:t,title:n||e,target:"_blank",rel:"noopener",innerHTML:e})}},17:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={open:{key:"open",title:"ui.app-bar.menu.open"},save:{key:"save",title:"ui.app-bar.menu.save"},upload:{key:"upload",title:"ui.app-bar.menu.upload"},import:{key:"import",title:"ui.app-bar.menu.import"},about:{key:"about",title:"ui.app-bar.menu.about"},signout:{key:"signout",title:"ui.app-bar.menu.signOut"}}},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0);function i(e,t){return Object(a.a)("button",{className:"fa mdc-icon-button",title:t||"",innerHTML:e})}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var a=n(3),i=n(0),s=n(1),o=n(12),r=n(14),c=n(39),l=n(5);const u={appBar:"mdc-top-app-bar mdc-top-app-bar--fixed",row:"mdc-top-app-bar__row",sectionStart:["mdc-top-app-bar__section","mdc-top-app-bar__section--align-start"].join(" "),sectionEnd:["mdc-top-app-bar__section","mdc-top-app-bar__section--align-end"].join(" "),title:"mdc-top-app-bar__title",fixedAdjust:"mdc-top-app-bar--fixed-adjust"};function d(e,t){return Object(i.a)("header",{className:u.appBar},[Object(i.a)("div",{className:u.row},[Object(i.a)("section",{className:u.sectionStart},[Object(i.a)("span",{className:u.title,innerHTML:e})]),Object(i.a)("section",{className:u.sectionEnd,role:"toolbar"},t)])])}(d||(d={})).fixedAdjust=function(){return Object(i.a)("div",{className:u.fixedAdjust})};var p=n(6),m=n(18);const h={view:{key:"view",title:"ui.app-bar.list",icon:p.a.Icon.thList},signin:{key:"signin",title:"ui.app-bar.signIn",icon:p.a.Icon.userCircle},open:{key:"open",title:"ui.app-bar.open",icon:p.a.Icon.folderOpen},about:{key:"about",title:"ui.app-bar.about",icon:p.a.Icon.infoCircle},menu:{key:"menu",title:"ui.app-bar.menu",icon:p.a.Icon.ellipsisV}},b={dashboard:"ui.app-bar.dashboard",list:"ui.app-bar.list"};var f=n(17),g=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function r(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((a=a.apply(e,t||[])).next())}))};class v extends l.a.Prototype{constructor(){super(),this.root=null,this.menu=null,this.actions=new Map,this.events=new Map,this.events.set(h.menu.key,(()=>this.menu.open()))}init(e){super.init(e),this.render()}render(){const e=[];for(const t of Object.values(h)){const n=Object(m.a)(t.icon,a.a.t(t.title));e.push(n);const i=new r.a(n);i.unbounded=!0,i.listen("click",this.events.get(t.key)),n.hidden=!0,this.actions.set(t.key,n)}this.actions.get(h.view.key).hidden=!1,this.actions.get(h.view.key).id="button-appBar-view",this.actions.get(h.open.key).hidden=!1,this.actions.get(h.about.key).hidden=!1,this.root=d("Potori",e),this.parent.append(this.root),this.parent.append(d.fixedAdjust()),new c.a(this.root)}prepare(){return g(this,void 0,void 0,(function*(){if(this.menu)return;const e=yield Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,71));this.menu=new e.default,this.menu.init(this.root.querySelector(".mdc-top-app-bar__section--align-end")),this.actions.get(h.menu.key).hidden=!1,this.actions.get(h.open.key).hidden=!0,this.actions.get(h.about.key).hidden=!0}))}switchView(){const e=this.actions.get(h.view.key),t=e.innerHTML===p.a.Icon.thList;e.innerHTML=t?p.a.Icon.tachometerAlt:p.a.Icon.thList,e.title=a.a.t(t?b.dashboard:b.list)}}var y=v;class k extends l.a.Prototype{constructor(){super(...arguments),this.change=()=>{}}init(e){super.init(e);window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{this.change(e.matches)}))}}var w=n(40),j=n(10),_=n(9);const O="./docs",x="https://github.com/lucka-me/potori",N="https://github.com/lucka-me/potori/blob/master/CHANGELOG.md",E={title:"ui.dialog.about.title",documents:"ui.dialog.about.documents",repo:"ui.dialog.about.repo",exportError:"ui.dialog.about.exportError",changelog:"ui.dialog.about.changelog",messageExportErrorEmpty:"message:ui.dialog.about.exportErrorEmpty",messageExportErrorCopied:"message:ui.dialog.about.exportErrorCopied"};class P extends _.a.DialogPrototype{constructor(){super(...arguments),this.events={info:()=>{}}}render(){const e=j.a.link(a.a.t(E.exportError),"#");e.onclick=()=>(this.exportError(),!1);const t=Object(j.a)("about-dialog",{title:a.a.t(E.title),contents:[Object(i.a)("span",{},[j.a.link(a.a.t(E.documents),O)]),Object(i.a)("span",{},[j.a.link(a.a.t(E.repo),x)]),Object(i.a)("span",{},[j.a.link(s.a.version.string,N,a.a.t(E.changelog))]),Object(i.a)("span",{},[e])],actions:[{action:_.a.Action.close,text:a.a.t(_.a.StringKey.close)}]});this.parent.append(t),this.ctrl=new w.a(t)}exportError(){if(s.a.errors.length<1)return void this.events.info(a.a.t(E.messageExportErrorEmpty));let e="";for(const t of s.a.errors){let n=t.message;if("message"in t.error){const e=t.error;n=e.stack||e.message}e+=`[${t.filename}][${t.lineno}:${t.colno}]${n}\n`}i.a.copy(e),this.events.info(a.a.t(E.messageExportErrorCopied,{count:s.a.errors.length}))}}class L extends _.a.DialogPrototype{constructor(){super(...arguments),this.textMessage=null}render(){this.textMessage=Object(i.a)("span",{});const e=Object(j.a)("alert-dialog",{contents:[this.textMessage],actions:[{action:_.a.Action.close,text:a.a.t(_.a.StringKey.close)}]});this.parent.append(e),this.ctrl=new w.a(e)}set message(e){this.ctrl||this.render(),this.textMessage.innerHTML=e}}var T=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function r(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((a=a.apply(e,t||[])).next())}))};class I extends l.a.Prototype{constructor(){super(...arguments),this.about=new P,this.alert=new L,this.details=null,this.import=null,this.match=null}init(e){super.init(e),this.about.init(e),this.alert.init(e)}prepare(){return T(this,void 0,void 0,(function*(){if(this.details)return;const e=yield Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,69));this.details=new e.default,this.details.init(this.parent);const t=yield Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,72));this.import=new t.default,this.import.init(this.parent);const a=yield Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,73));this.match=new a.default,this.match.init(this.parent)}))}}var M=n(41);const A="mdc-linear-progress",V="mdc-linear-progress__buffer",H="mdc-linear-progress__buffer-bar",C="mdc-linear-progress__buffer-dots",S="mdc-linear-progress__bar mdc-linear-progress__primary-bar",B="mdc-linear-progress__bar mdc-linear-progress__secondary-bar",D="mdc-linear-progress__bar-inner";class U extends l.a.Prototype{constructor(){super(...arguments),this.ctrl=null,this.root=null}init(e){super.init(e),this.render()}render(){this.root=Object(i.a)("div",{className:A,role:"progressbar",ariaValuemin:0,ariaValuemax:1,ariaValuenow:0},[Object(i.a)("div",{className:V},[Object(i.a)("div",{className:H}),Object(i.a)("div",{className:C})]),Object(i.a)("div",{className:S},[Object(i.a)("span",{className:D})]),Object(i.a)("div",{className:B},[Object(i.a)("span",{className:D})])]),this.root.hidden=!0,this.parent.append(this.root),this.ctrl=new M.a(this.root),this.ctrl.close()}open(){this.root.hidden=!1,this.ctrl.open()}close(){this.root.hidden=!0,this.ctrl.close()}set buffer(e){this.ctrl.buffer=e}set progress(e){this.ctrl.progress=e}}var $=U,F=n(42);const R="mdc-snackbar",q="mdc-snackbar__surface",J="mdc-snackbar__label",K="mdc-snackbar__actions",G="mdc-snackbar__dismiss mdc-icon-button fa";class z extends l.a.Prototype{constructor(){super(...arguments),this.ctrl=null}render(){const e=Object(i.a)("div",{className:R},[Object(i.a)("div",{className:q,role:"status",ariaRelevant:"additions"},[Object(i.a)("div",{className:J,ariaAtomic:!1}),Object(i.a)("div",{className:K,ariaAtomic:!0},[Object(i.a)("button",{className:G,innerHTML:p.a.Icon.times})])])]);this.parent.append(e),this.ctrl=new F.a(e)}show(e){this.ctrl||this.render(),this.ctrl.labelText=e,this.ctrl.open()}}var Q,W=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function r(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((a=a.apply(e,t||[])).next())}))};!function(e){const t=new y,r=new k,c=new I,l=new $,u=new z;let d=null,p=null,m=null;function b(e){e?(t.actions.get(h.signin.key).hidden=!0,t.menu&&(t.menu.items.get(f.a.signout.key).hidden=!1)):(g(),t.actions.get(h.signin.key).hidden=!navigator.onLine,t.menu&&(t.menu.items.get(f.a.signout.key).hidden=!0,t.menu.items.get(f.a.upload.key).hidden=!0,t.menu.items.get(f.a.import.key).hidden=!0))}function g(){t.menu&&(t.menu.items.get(f.a.open.key).hidden=!1,t.menu.items.get(f.a.save.key).hidden=!0,t.actions.get(h.menu.key).hidden=!0),t.actions.get(h.open.key).hidden=!1,t.actions.get(h.about.key).hidden=!1,l.close(),l.buffer=0,l.progress=0,p&&(p.setVisible(!1),m.clear(),p.map.update(s.a.nominations))}function v(){return W(this,void 0,void 0,(function*(){if(p)return;yield t.prepare(),t.menu.items.get(f.a.signout.key).hidden=!s.a.auth.signedIn,t.menu.events.set(f.a.open.key,(()=>s.a.open())),t.menu.events.set(f.a.save.key,(()=>s.a.save())),t.menu.events.set(f.a.upload.key,(()=>s.a.upload())),t.menu.events.set(f.a.about.key,(()=>c.about.open())),t.menu.events.set(f.a.signout.key,(()=>s.a.auth.signOut()));const e=yield Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,65));p=new e.default,p.init(d),s.a.events.bsUpdate=()=>{p.bs.update(s.a.nominations)},p.map.events.styleLoaded=()=>s.a.nominations,p.filter.events.switchType=(e,t)=>{if("rejected"!==e.key)for(const n of s.a.nominations)n.status.isType(e.code)&&(document.getElementById("card-"+n.id).hidden=!t);else{const e=p.filter.reasonFilter;for(const t of s.a.nominations)t.status.code<100||(document.getElementById("card-"+t.id).hidden=!e.get(t.status.code));p.map.reasonFilter=e,p.map.updateRejected(s.a.nominations)}p.map.setTypeVisible(e.key,t)},p.filter.events.switchReason=(e,t)=>{for(const n of s.a.nominations)n.status.code===e.code&&(document.getElementById("card-"+n.id).hidden=!t);p.map.reasonFilter=p.filter.reasonFilter,p.map.updateRejected(s.a.nominations)},p.bs.events.analyse=e=>s.a.bs.analyse(e),p.bs.basic.events={refresh:()=>{s.a.updateBsData()},clear:()=>{s.a.clearBsData(),p.bs.update([])}},r.change=()=>{p&&p.updateStyle(),c.details.updateStyle()};const a=yield Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,70));m=new a.default,m.init(d),m.events.alert=e=>{c.alert.message=e,c.alert.open()},m.events.focus=e=>{p.map.easeTo(e.lngLat)},p.map.events.focus=e=>{m.focus(e)},yield c.prepare(),c.details.events.alert=e=>{c.alert.message=e,c.alert.open()},c.details.events.query=(e,t,n)=>{s.a.bs.query(e,t,n)},c.details.events.update=e=>{!function(e){if(!p)return;p.update(s.a.nominations);let t=!1;e.status instanceof o.a?t=p.filter.reasons.get(e.status).checked:e.status instanceof o.b&&(t=p.filter.types.get(e.status).checked);m.update(e,t)}(e)},m.events.openDetails=e=>{c.details.nomination=e,c.details.open()},c.import.import=e=>{s.a.importJSON(e)},t.menu.events.set(f.a.import.key,(()=>c.import.open()))}))}e.init=function(){document.documentElement.lang=a.a.language;const e=document.body;t.events.set(h.view.key,(()=>function(){if(!p)return;t.switchView(),p.switchView(),m.switchView()}())),t.events.set(h.signin.key,(()=>s.a.auth.signIn())),t.events.set(h.open.key,(()=>s.a.open())),t.events.set(h.about.key,(()=>c.about.open())),t.init(e),l.init(e),d=Object(i.a)("div",{className:"main-box"}),e.append(d),u.init(e),c.init(e),c.about.events.info=e=>{u.show(e)},r.init(e),function(){s.a.events.authStatusChanged=e=>b(e),navigator.onLine||b(!1);s.a.events.progressUpdate=e=>l.progress=e,s.a.events.bufferUpdate=e=>l.buffer=e,s.a.events.start=()=>{t.actions.get(h.open.key).hidden=!0,Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,65)),Promise.all([n.e(3),n.e(0),n.e(8)]).then(n.bind(null,70)),l.open()},s.a.events.idle=()=>{v().then((()=>{p.setVisible(!0),p.map.fit(s.a.nominations),p.refresh(s.a.nominations),m.show(s.a.nominations),t.menu.items.get(f.a.open.key).hidden=!0,t.menu.items.get(f.a.save.key).hidden=!1,t.menu.items.get(f.a.upload.key).hidden=!s.a.auth.signedIn,t.menu.items.get(f.a.import.key).hidden=!1,l.close()}))},s.a.events.clear=()=>{g()},s.a.events.match=(e,t,n)=>{v().then((()=>{c.match.events.close=n,c.match.nominations=[e,t],c.match.open()}))},s.a.events.alert=e=>{c.alert.message=e,c.alert.open()},s.a.events.info=e=>{u.show(e)},s.a.file.local.events.openUI=e=>{!function(e){const t=Object(i.a)("input",{cssText:"display:none;",type:"file",accept:"json"});t.addEventListener("change",(t=>{e(t.target.files[0])}),!1),document.body.append(t),t.click(),setTimeout((()=>{t.remove()}),1e3)}(e)},s.a.file.local.events.saveUI=(e,t)=>{!function(e,t){const n=Object(i.a)("a",{cssText:"display:none",href:t,download:e});document.body.append(n),n.click(),n.remove()}(e,t)}}()}}(Q||(Q={}))},33:function(e,t,n){},5:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.Prototype=class{constructor(){this.parent=null,Object.defineProperty(this,"parent",{enumerable:!1})}init(e){this.parent=e}render(){}}}(a||(a={}))},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0);function i(e){return Object(a.a)("i",{className:"fa fa-fw",innerHTML:e})}!function(e){e.Icon={search:"",thList:"",times:"",clock:"",edit:"",infoCircle:"",arrowUp:"",plus:"",calendarAlt:"",folderOpen:"",globe:"",angleUp:"",angleDown:"",ellipsisV:"",trash:"",userCircle:"",syncAlt:"",redoAlt:"",mapMarkerAlt:"",tachometerAlt:"",brain:""}}(i||(i={}))},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,i=n(5);!function(e){e.Action={close:"close"},e.StringKey={close:"ui.dialog.close"};class t extends i.a.Prototype{constructor(){super(...arguments),this.ctrl=null}open(){this.ctrl||this.render(),this.ctrl.open()}}e.DialogPrototype=t}(a||(a={}))}}]);
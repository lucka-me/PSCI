(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{60:function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"a",(function(){return r}));var a=s(1);s.d(e,"c",(function(){return a.a})),s.d(e,"d",(function(){return a.c}));s(15);class i extends a.b{constructor(){super(),this.root=null,Object.defineProperty(this,"root",{enumerable:!1})}update(t){}updateStyle(){}setVisible(t){if(!this.root){if(!t)return;this.render()}this.root.hidden=!t}}class r extends i{constructor(){super(...arguments),this.chart=null}static get color(){return{border:"rgba(0, 0, 0, 0.2)",borderHover:"rgba(0, 0, 0, 0.4)"}}static buildChartCard(t,e,s,i){return a.a.build("div",{className:["mdc-card","mdc-card--outlined","padding--8","flex--"+s,"flex-shrink--1"].join(" "),cssText:`min-width:${i}px`},[a.a.build("span",{className:"mdc-typography--headline6",innerHTML:t}),a.a.build("div",{className:"container-chart"},[e])])}}},62:function(t,e,s){"use strict";var a=s(0),i=s(5),r=s(14),o=s(11),n=s(13),c=s(16),d=s(4),l={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},h={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},u=function(t){function e(s){return t.call(this,Object(a.a)(Object(a.a)({},e.defaultAdapter),s))||this}return Object(a.b)(e,t),Object.defineProperty(e,"strings",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!0,configurable:!0}),e.prototype.setChecked=function(t){this.adapter.setNativeControlChecked(t),this.updateAriaChecked_(t),this.updateCheckedStyling_(t)},e.prototype.setDisabled=function(t){this.adapter.setNativeControlDisabled(t),t?this.adapter.addClass(l.DISABLED):this.adapter.removeClass(l.DISABLED)},e.prototype.handleChange=function(t){var e=t.target;this.updateAriaChecked_(e.checked),this.updateCheckedStyling_(e.checked)},e.prototype.updateCheckedStyling_=function(t){t?this.adapter.addClass(l.CHECKED):this.adapter.removeClass(l.CHECKED)},e.prototype.updateAriaChecked_=function(t){this.adapter.setNativeControlAttr(h.ARIA_CHECKED_ATTR,""+!!t)},e}(d.a),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ripple_=e.createRipple_(),e}return Object(a.b)(e,t),e.attachTo=function(t){return new e(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.changeHandler_)},e.prototype.initialSyncWithDOM=function(){var t=this;this.changeHandler_=function(){for(var e,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return(e=t.foundation).handleChange.apply(e,Object(a.c)(s))},this.nativeControl_.addEventListener("change",this.changeHandler_),this.checked=this.checked},e.prototype.getDefaultFoundation=function(){var t=this;return new u({addClass:function(e){return t.root.classList.add(e)},removeClass:function(e){return t.root.classList.remove(e)},setNativeControlChecked:function(e){return t.nativeControl_.checked=e},setNativeControlDisabled:function(e){return t.nativeControl_.disabled=e},setNativeControlAttr:function(e,s){return t.nativeControl_.setAttribute(e,s)}})},Object.defineProperty(e.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(t){this.foundation.setChecked(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(t){this.foundation.setDisabled(t)},enumerable:!0,configurable:!0}),e.prototype.createRipple_=function(){var t=this,e=u.strings.RIPPLE_SURFACE_SELECTOR,s=this.root.querySelector(e),i=Object(a.a)(Object(a.a)({},n.a.createAdapter(this)),{addClass:function(t){return s.classList.add(t)},computeBoundingRect:function(){return s.getBoundingClientRect()},deregisterInteractionHandler:function(e,s){t.nativeControl_.removeEventListener(e,s,Object(r.a)())},isSurfaceActive:function(){return Object(o.c)(t.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(e,s){t.nativeControl_.addEventListener(e,s,Object(r.a)())},removeClass:function(t){s.classList.remove(t)},updateCssVariable:function(t,e){s.style.setProperty(t,e)}});return new n.a(this.root,new c.a(i))},Object.defineProperty(e.prototype,"nativeControl_",{get:function(){var t=u.strings.NATIVE_CONTROL_SELECTOR;return this.root.querySelector(t)},enumerable:!0,configurable:!0}),e}(i.a),m=s(60),b=s(8);class f extends m.b{constructor(){super(...arguments),this.block={type:{root:null},reason:{root:null}},this.types=new Map,this.reasons=new Map,this.events={switchType:()=>{},switchReason:()=>{}}}render(){this.block.type.root=m.c.build("div",{className:"flex-box-row--nowrap"}),this.block.reason.root=m.c.build("div",{className:"flex-box-row--nowrap"}),this.root=m.c.build("div",{className:["mdc-card","mdc-card--outlined","padding--8","flex--1","flex-shrink--0"].join(" ")},[m.c.build("span",{className:"mdc-typography--headline6",innerHTML:m.d.t("Filter")}),m.c.build("span",{className:"mdc-typography--subtitle1",innerHTML:m.d.t("Type")}),this.block.type.root,m.c.build("span",{className:"mdc-typography--subtitle1",innerHTML:m.d.t("Rejected")}),this.block.reason.root]),this.setVisible(!1),this.parent.append(this.root);for(const t of b.c.reasons.values()){const e=f.buildSwitch(this.block.reason,t,"rejected");e.listen("change",()=>{this.switchReason(t,e.checked)}),this.reasons.set(t,e)}for(const t of b.c.types.values()){const e=f.buildSwitch(this.block.type,t,t.key);e.listen("change",()=>this.switchType(t,e.checked)),this.types.set(t,e)}}switchType(t,e){if(t.code>100)for(const t of this.reasons.values())t.checked=e;this.events.switchType(t,e)}switchReason(t,e){this.events.switchReason(t,e);const s=b.c.types.get("rejected");e&&!this.types.get(s).checked&&(this.types.get(s).checked=!0,this.events.switchType(s,!0))}static buildSwitch(t,e,s){const a="switch-filter-"+e.key,i=m.c.build("div",{className:"mdc-switch"},[m.c.build("div",{className:"mdc-switch__track"}),m.c.build("div",{className:"mdc-switch__thumb-underlay",id:a},[m.c.build("div",{className:"mdc-switch__thumb"},[m.c.build("input",{type:"checkbox",className:"mdc-switch__native-control",role:"switch"})])])]),r=m.c.build("div",{className:"mdc-switch-box margin-h--4"},[i,m.c.build("label",{className:"fa fa-fw status-"+s,for:a,title:m.d.t(e.title),innerHTML:e.icon})]);t.root.append(r);const o=new p(i);return o.checked=!0,o}}e.a=new f},66:function(t,e,s){"use strict";s.r(e);var a=s(61),i=s.n(a),r=s(60),o=s(13);class n extends r.b{updateStats(t){}}class c extends n{constructor(){super(...arguments),this.chart=null}static buildChartCard(t,e,s,a){return r.a.buildChartCard(t,e,s,a)}}var d=class extends n{constructor(){super(...arguments),this.textReviews=null,this.textSubtitle=null,this.actionRefresh=null,this.events={refresh:()=>{},clear:()=>{}}}render(){this.textReviews=r.c.build("span",{cssText:"font-weight:300;font-size:4.5rem;line-height:4.5rem;",innerHTML:"0"}),this.textSubtitle=r.c.build("span",{className:"mdc-typography--body1 text-nowrap",innerHTML:r.d.t("Reviews for Portals",{count:0})}),this.actionRefresh=r.c.build("button",{className:"mdc-button mdc-card__action mdc-card__action--button",disabled:!0},[r.c.build("div",{className:"mdc-button__ripple"}),r.c.build("i",{className:"fa fa-fw mdc-button__icon",innerHTML:""}),r.c.build("span",{className:"mdc-button__label",innerHTML:r.d.t("Refresh")})]);const t=new o.a(this.actionRefresh);t.unbounded=!0,t.listen("click",()=>{this.actionRefresh.disabled=!0,this.events.refresh()});const e=r.c.build("button",{className:["fa","mdc-icon-button","mdc-card__action","mdc-card__action--icon"].join(" "),title:r.d.t("Clear"),id:"button-card-nomination-location",innerHTML:""}),s=new o.a(e);s.unbounded=!0,s.listen("click",()=>{this.events.clear()}),this.root=r.c.build("div",{className:["mdc-card","mdc-card--outlined","flex--1","flex-shrink--1"].join(" ")},[r.c.build("div",{className:["flex-box-col","padding--8","flex-grow--1","flex-justify-content--between"].join(" ")},[r.c.build("span",{className:"mdc-typography--headline6",innerHTML:r.d.t("Brainstorming")}),this.textReviews,this.textSubtitle]),r.c.build("div",{className:"mdc-card__actions"},[r.c.build("div",{className:"mdc-card__action-buttons"},[this.actionRefresh]),r.c.build("div",{className:"mdc-card__action-icons"},[e])])]),this.setVisible(!1),this.parent.append(this.root)}updateStats(t){this.textReviews.innerHTML=""+t.review,this.textSubtitle.innerHTML=r.d.t("Reviews for Portals",{count:t.nomination}),this.actionRefresh.disabled=!1}},l=s(25);var h=class extends c{render(){const t=r.c.build("canvas",{className:"canvas-chart--h"});this.root=c.buildChartCard(r.d.t("Brainstorming Rates"),t,1,240),this.setVisible(!1),this.parent.append(this.root);const e=[];for(const t of Object.values(l.a))e.push(r.d.t(t));const s=getComputedStyle(document.documentElement);this.chart=new i.a(t.getContext("2d"),{type:"radar",data:{labels:e,datasets:[{data:[],borderColor:s.getPropertyValue("--mdc-theme-primary"),pointRadius:0}]},options:{legend:{display:!1},scale:{ticks:{display:!1,min:1,max:5,stepSize:1},angleLines:{color:s.getPropertyValue("--mdc-theme-text-disabled-on-light")},gridLines:{color:s.getPropertyValue("--mdc-theme-text-disabled-on-light")}}}})}updateStats(t){const e=[];for(const s of Object.keys(l.a)){const a=t.rate.get(s),i=a.reduce((t,e)=>t+e,0)/a.length;e.push(parseFloat(i.toFixed(2)))}this.chart.data.datasets[0].data=e,this.chart.update()}updateStyle(){if(!this.chart)return;const t=getComputedStyle(document.documentElement);this.chart.data.datasets[0].borderColor=t.getPropertyValue("--mdc-theme-primary"),this.chart.options.scale.angleLines.color=t.getPropertyValue("--mdc-theme-text-disabled-on-light"),this.chart.options.scale.gridLines.color=t.getPropertyValue("--mdc-theme-text-disabled-on-light"),this.chart.update()}};var u=class extends n{constructor(){super(...arguments),this.textSynch=null}render(){this.textSynch=r.c.build("span",{cssText:"font-weight:300;font-size:6rem;line-height:6rem;",innerHTML:"0.0"}),this.root=r.c.build("div",{className:["mdc-card","mdc-card--outlined","padding--8","flex--1","flex-shrink--1","flex-justify-content--between"].join(" ")},[r.c.build("span",{className:"mdc-typography--headline6",innerHTML:r.d.t("Brainstorming Synch")}),r.c.build("span",{className:"text-nowarp"},[this.textSynch,r.c.build("span",{cssText:"font-size:2rem;line-height:2rem;",innerHTML:"%"})]),r.c.build("span",{className:"mdc-typography--body1 text-nowarp",innerHTML:r.d.t("Reviews match the result")})]),this.setVisible(!1),this.parent.append(this.root)}updateStats(t){const e=t.synch.total>0?t.synch.synched/t.synch.total:0;this.textSynch.innerHTML=""+(100*e).toFixed(1)}},p=s(44),m=s.n(p);var b=class{static fillTimeDataMap(t,e,s){let a=e;for(;a<=s;){const e=m()(a+1e3).startOf("month"),s=e.valueOf();t.has(s)||t.set(s,0),a=e.endOf("month").valueOf()}}};var f=class extends c{render(){const t=r.c.build("canvas",{className:"canvas-chart--h"});this.root=c.buildChartCard(r.d.t("Brainstorming Reviews"),t,3,300),this.setVisible(!1),this.parent.append(this.root);const e=getComputedStyle(document.documentElement);this.chart=new i.a(t.getContext("2d"),{type:"line",data:{labels:[],datasets:[{label:r.d.t("Reviews"),data:[],borderColor:e.getPropertyValue("--mdc-theme-primary"),pointRadius:0}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{type:"time",time:{unit:"month",tooltipFormat:"YYYY-MM",displayFormats:{month:"YYYY-MM"}}}]}}})}updateStats(t){if(t.reviewTimes.length<1)return this.chart.data.datasets[0].data=[],void this.chart.update();const e=new Map;let s=m()(t.reviewTimes[0]).startOf("month").valueOf(),a=s;for(const i of t.reviewTimes){const t=m()(i).startOf("month").valueOf();t<s?s=t:t>a&&(a=t),e.has(t)?e.set(t,e.get(t)+1):e.set(t,1)}b.fillTimeDataMap(e,s,a);const i=[];e.forEach((t,e)=>{i.push({t:e,y:t})}),i.sort((t,e)=>t.t-e.t),this.chart.data.datasets[0].data=i,this.chart.update()}updateStyle(){if(!this.chart)return;const t=getComputedStyle(document.documentElement);this.chart.data.datasets[0].borderColor=t.getPropertyValue("--mdc-theme-primary"),this.chart.update()}};class y extends r.b{constructor(){super(),this.basic=new d,this.rates=new h,this.synch=new u,this.reviews=new f,this.events={analyse:()=>({review:0,nomination:0,rate:new Map,reviewTimes:[],synch:{total:0,synched:0}})},Object.defineProperty(this,"events",{enumerable:!1})}init(t){this.forEach(e=>{e.init(t)})}update(t){const e=this.events.analyse(t);this.forEach(t=>{t.updateStats(e)})}updateStyle(){this.forEach(t=>{t.updateStyle()})}setVisible(t){this.forEach(e=>{e.setVisible(t)})}forEach(t){Object.values(this).forEach(t)}}var g=y;class v extends r.a{render(){const t=r.c.build("canvas",{className:"canvas-chart--h"});this.root=r.a.buildChartCard(r.d.t("Count by Month"),t,3,300),this.setVisible(!1),this.parent.append(this.root);const e=getComputedStyle(document.documentElement),s=e.getPropertyValue("--mdc-theme-primary"),a=e.getPropertyValue("--mdc-theme-secondary");this.chart=new i.a(t.getContext("2d"),{type:"line",data:{labels:[],datasets:[{label:r.d.t("Submissions"),data:[],borderColor:s,pointBackgroundColor:s,pointRadius:0,fill:!1},{label:r.d.t("Results"),data:[],borderColor:a,pointBackgroundColor:a,pointRadius:0,fill:!1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{type:"time",time:{unit:"month",tooltipFormat:"YYYY-MM",displayFormats:{month:"YYYY-MM"}}}]},tooltips:{mode:"x"}}})}update(t){if(0===t.length)return this.chart.data.datasets[0].data=[],this.chart.data.datasets[1].data=[],void this.chart.update();const e=new Map,s=new Map;let a=m()(t[0].confirmedTime).startOf("month").valueOf(),i=a;for(const r of t){const t=m()(r.confirmedTime).startOf("month").valueOf();if(t<a?a=t:t>i&&(i=t),e.has(t)?e.set(t,e.get(t)+1):e.set(t,1),!r.resultTime)continue;const o=m()(r.resultTime).startOf("month").valueOf();o>i&&(i=o),s.has(o)?s.set(o,s.get(o)+1):s.set(o,1)}b.fillTimeDataMap(e,a,i),b.fillTimeDataMap(s,a,i);const r=[],o=[];e.forEach((t,e)=>{r.push({t:e,y:t})}),s.forEach((t,e)=>{o.push({t:e,y:t})}),r.sort((t,e)=>t.t-e.t),o.sort((t,e)=>t.t-e.t),this.chart.data.datasets[0].data=r,this.chart.data.datasets[1].data=o,this.chart.update()}updateStyle(){if(!this.chart)return;const t=getComputedStyle(document.documentElement);this.chart.data.datasets[0].borderColor=t.getPropertyValue("--mdc-theme-primary"),this.chart.data.datasets[1].borderColor=t.getPropertyValue("--mdc-theme-secondary"),this.chart.update()}}var C=v,w=s(62),x=s(64),k=s.n(x),S=(s(65),s(8));class _ extends r.b{constructor(){super(...arguments),this.ctrl=null,this.events={focus:()=>{},styleLoaded:()=>[]},this.tasks=[]}render(){const t=r.c.build("div",{cssText:["width: 100%","height: 100%","clip-path: inset(100% round 4px)","-webkit-clip-path: inset(0 round 4px)"].join(";")});this.root=r.c.build("div",{className:"mdc-card mdc-card--outlined flex--3 flex-shrink--1",cssText:"min-width: 300px;"},[t]),this.parent.append(this.root),k.a.accessToken="pk.eyJ1IjoibHVja2EtbWUiLCJhIjoiY2p2NDk5NmRvMHFreTQzbzduemM1MHV4cCJ9.7XGmxnEJRoCDr-i5BBmBfw",this.ctrl=new k.a.Map({container:t,style:`mapbox:${getComputedStyle(document.documentElement).getPropertyValue("--map-style").trim()}?optimize=true`}),this.ctrl.on("idle",()=>this.executeTasks()),this.ctrl.addControl(new k.a.NavigationControl),this.ctrl.addControl(new k.a.FullscreenControl),this.resize()}get loaded(){return this.ctrl&&this.ctrl.isStyleLoaded()}update(t){this.loaded?(this.updateRejected(t),this.updateSource("accepted",_.generateGeoJSON(t,[S.c.types.get("accepted").code])),this.updateSource("pending",_.generateGeoJSON(t,[S.c.types.get("pending").code]))):this.tasks.push(()=>this.update(t))}updateStyle(){this.loaded?(this.ctrl.setStyle(`mapbox:${getComputedStyle(document.documentElement).getPropertyValue("--map-style").trim()}?optimize=true`),this.update(this.events.styleLoaded())):this.tasks.push(()=>this.updateStyle())}setTypeVisible(t,e){if(!this.loaded)return void this.tasks.push(()=>this.setTypeVisible(t,e));const s=e?"visible":"none";this.ctrl.setLayoutProperty(`potori-${t}-cluster`,"visibility",s),this.ctrl.setLayoutProperty(`potori-${t}-count`,"visibility",s),this.ctrl.setLayoutProperty(`potori-${t}-unclustered`,"visibility",s)}easeTo(t){if(!this.loaded)return void this.tasks.push(()=>this.easeTo(t));const e=this.ctrl.getZoom();this.ctrl.easeTo({center:t,zoom:e<15?15:e})}resize(){this.loaded?this.ctrl.resize():this.tasks.push(()=>this.resize())}fit(t){if(!this.loaded)return void this.tasks.push(()=>this.fit(t));const e={lng:-181,lat:-91},s={lng:181,lat:91};for(const a of t)a.lngLat&&(a.lngLat.lng>e.lng&&(e.lng=a.lngLat.lng),a.lngLat.lng<s.lng&&(s.lng=a.lngLat.lng),a.lngLat.lat>e.lat&&(e.lat=a.lngLat.lat),a.lngLat.lat<s.lat&&(s.lat=a.lngLat.lat));s.lng>-181&&this.ctrl.fitBounds([s,e],{linear:!0})}updateRejected(t){if(!this.loaded)return void this.tasks.push(()=>this.updateRejected(t));const e=[];for(const[t,s]of w.a.reasons.entries())s.checked&&e.push(t.code);this.updateSource("rejected",_.generateGeoJSON(t,e))}executeTasks(){const t=this.tasks.length;for(let e=0;e<t;e++)this.tasks.shift()()}updateSource(t,e){const s="potori-"+t,a=this.ctrl.getSource(s);if(a)return void a.setData(e);this.ctrl.addSource(s,{type:"geojson",data:e,cluster:!0});const i=getComputedStyle(document.documentElement),r=i.getPropertyValue("--color-"+t),o=i.getPropertyValue(`--color-${t}--dark`);this.ctrl.addLayer({id:s+"-cluster",type:"circle",source:s,filter:["has","point_count"],paint:{"circle-color":r,"circle-opacity":.6,"circle-stroke-width":4,"circle-stroke-color":o,"circle-radius":["step",["get","point_count"],20,50,30,100,40]}}),this.ctrl.addLayer({id:s+"-count",type:"symbol",source:s,filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":getComputedStyle(document.documentElement).getPropertyValue("--mdc-theme-on-surface")}}),this.ctrl.addLayer({id:s+"-unclustered",type:"circle",source:s,filter:["!",["has","point_count"]],paint:{"circle-color":r,"circle-radius":5,"circle-stroke-width":2,"circle-stroke-color":o}}),this.ctrl.on("click",s+"-cluster",t=>{const e=this.ctrl.queryRenderedFeatures(t.point,{layers:[s+"-cluster"]}),a=e[0].properties.cluster_id;this.ctrl.getSource(s).getClusterExpansionZoom(a,(t,s)=>{t||this.ctrl.easeTo({center:e[0].geometry.coordinates,zoom:s})})}),this.ctrl.on("click",s+"-unclustered",t=>{t.features[0].geometry.coordinates;const e=t.features[0].geometry.coordinates;for(;Math.abs(t.lngLat.lng-e[0])>180;)e[0]+=t.lngLat.lng>e[0]?360:-360;(new k.a.Popup).setLngLat(e).setText(t.features[0].properties.title).addTo(this.ctrl),this.events.focus(t.features[0].properties.id)})}static generateGeoJSON(t,e){const s={type:"FeatureCollection",features:[]};if(e.length<1)return s;for(const a of t)e.includes(a.status.code)&&a.lngLat&&s.features.push({type:"Feature",properties:{id:a.id,title:a.title,status:a.status},geometry:{type:"Point",coordinates:[a.lngLat.lng,a.lngLat.lat]}});return s}}var T=_;class L extends r.a{render(){const t=r.c.build("canvas",{className:"canvas-chart--h"});this.root=r.a.buildChartCard(r.d.t("Quotas"),t,2,200),this.setVisible(!1),this.parent.append(this.root);const e=[];for(let t=0;t<14;t++)e.push(""+t);const s=getComputedStyle(document.documentElement);this.chart=new i.a(t.getContext("2d"),{type:"bar",data:{labels:e,datasets:[{data:[],backgroundColor:s.getPropertyValue("--mdc-theme-primary"),hoverBackgroundColor:s.getPropertyValue("--mdc-theme-primary")}]},options:{legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{scaleLabel:{display:!0,labelString:r.d.t("Day")}}]}}})}update(t){const e=new Array(14).fill(0),s=Date.now();for(const a of t){const t=a.restoreTime;t>s&&(e[Math.floor((t-s)/864e5)]+=1)}this.chart.data.datasets[0].data=e,this.chart.update()}updateStyle(){if(!this.chart)return;const t=getComputedStyle(document.documentElement);this.chart.data.datasets[0].backgroundColor=t.getPropertyValue("--mdc-theme-primary"),this.chart.data.datasets[0].hoverBackgroundColor=t.getPropertyValue("--mdc-theme-primary"),this.chart.update()}}var E=L;class N extends r.a{render(){const t=r.c.build("canvas",{className:"canvas-chart--v"});this.root=r.a.buildChartCard(r.d.t("Stats Rejected"),t,2,250),this.setVisible(!1),this.parent.append(this.root);const e=[],s=[];for(const t of S.c.reasons.values())e.push(r.d.t(t.title)),s.push(t.color);this.chart=new i.a(t.getContext("2d"),{type:"doughnut",data:{labels:e,datasets:[{data:[],backgroundColor:s,borderAlign:"inner",borderColor:N.color.border,hoverBackgroundColor:s,hoverBorderColor:N.color.borderHover}]},options:{legend:{display:!0,position:"right"}}})}update(t){const e=new Array(S.c.reasons.size).fill(0);for(const s of t)s.status.code>100&&(e[s.status.code-101]+=1);this.chart.data.datasets[0].data=e,this.chart.update()}}var R=N;class O extends r.a{render(){const t=r.c.build("canvas",{className:"canvas-chart--v"});this.root=r.a.buildChartCard(r.d.t("Stats Type"),t,2,250),this.setVisible(!1),this.parent.append(this.root);const e=[],s=[],a=[],o=[],n=getComputedStyle(document.documentElement);for(const[t,i]of S.c.types.entries())e.push(r.d.t(i.title)),s.push(n.getPropertyValue("--color-"+t)),a.push(n.getPropertyValue(`--color-${t}--light`)),o.push(n.getPropertyValue(`--color-${t}--dark`));this.chart=new i.a(t.getContext("2d"),{type:"doughnut",data:{labels:e,datasets:[{data:[],backgroundColor:s,borderAlign:"inner",borderColor:O.color.border,hoverBackgroundColor:s,hoverBorderColor:O.color.borderHover}]},options:{legend:{display:!0,position:"right"}}})}update(t){const e=new Array(3).fill(0);for(const s of t)s.status.code>100?e[2]+=1:e[s.status.code]+=1;this.chart.data.datasets[0].data=e,this.chart.update()}}var j=O,M=s(1);class P extends M.b{constructor(){super(),this.root=null,this.map=new T,this.filter=w.a,this.statsType=new j,this.statsRejected=new R,this.countByMonth=new C,this.quotas=new E,this.bs=new g,Object.defineProperty(this,"root",{enumerable:!1})}init(t){super.init(t),i.a.defaults.global.legend.labels.boxWidth=10,i.a.defaults.global.maintainAspectRatio=!1,i.a.defaults.line.tooltips={intersect:!1},i.a.defaults.doughnut.tooltips={callbacks:{label:(t,e)=>{const s=e.datasets[t.datasetIndex],a=s._meta,i=a[Object.keys(a)[0]].data,r=s.data.reduce((t,e,s)=>t+(i[s].hidden?0:e),0),o=s.data[t.index],n=(o/r*100).toFixed(2);return`${e.labels[t.index]}: ${o} (${n}%)`}}},i.a.defaults.radar.tooltips={intersect:!1,callbacks:{title:(t,e)=>e.labels[t[0].index]}},this.render(),this.forEach(t=>{t.init(this.root)})}render(){this.root=M.a.build("div",{className:["flex--2","flex-box-row--wrap","flex-align-items--start","flex-align-content--start","padding--4","dashboard"].join(" "),cssText:["height: 100%","box-sizing: border-box","overflow-y: scroll","scroll-behavior: smooth","-webkit-overflow-scrolling: touch"].join(";")}),this.parent.append(this.root)}refresh(t){this.forEach(e=>{e.update(t)})}update(t){this.map.update(t),this.statsType.update(t),this.statsRejected.update(t),this.countByMonth.update(t)}updateStyle(){this.forEach(t=>{t.updateStyle()})}setVisible(t){this.forEach(e=>{e.setVisible(t)}),this.map.resize()}forEach(t){Object.values(this).forEach(t)}}e.default=P}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["charts"],{6923:function(t,e,a){"use strict";a.r(e);var s=a("7a23");const r={key:0,class:"charts"},o={class:"grid grid--1-2"},c={class:"grid grid--2-1"};function n(t,e,a,n,l,i){const u=Object(s["x"])("material-top-app-bar"),d=Object(s["x"])("material-top-app-bar-adjust"),h=Object(s["x"])("status-chart"),b=Object(s["x"])("reasons-chart"),p=Object(s["x"])("count-by-month-chart"),O=Object(s["x"])("interval-chart"),f=Object(s["x"])("quotas-chart");return Object(s["q"])(),Object(s["d"])(s["a"],null,[Object(s["h"])(u,{title:"Charts","navi-back":""}),Object(s["h"])(d),t.$store.getters.empty?Object(s["e"])("",!0):(Object(s["q"])(),Object(s["d"])("main",r,[Object(s["h"])("div",o,[Object(s["h"])(h),Object(s["h"])(b)]),Object(s["h"])(p),Object(s["h"])("div",c,[Object(s["h"])(O),Object(s["h"])(f)])]))],64)}var l=a("9ab4"),i=a("9b4a"),u=(a("cadc"),a("ce1f")),d=a("2281"),h=a("4892");function b(t,e,a,r,o,c){const n=Object(s["x"])("chart-view"),l=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(l,{title:"Count by Month"},{default:Object(s["C"])(()=>[Object(s["h"])(n,{"chart-type":"line","chart-datasets":t.datasets,"chart-options":t.options},null,8,["chart-datasets","chart-options"])]),_:1})}var p=a("1315"),O=a("1b40");const f={class:"chart"};function j(t,e,a,r,o,c){return Object(s["q"])(),Object(s["d"])("div",f,[Object(s["h"])("span",null,Object(s["z"])(t.title),1),Object(s["w"])(t.$slots,"default")])}class m extends O["d"]{}function g(t,e,a){let s=e;while(s<=a){const e=p["DateTime"].fromMillis(s+1e3).startOf("month"),a=e.valueOf();t.has(a)||t.set(a,0),s=e.endOf("month").valueOf()}}Object(l["c"])([Object(O["c"])(String)],m.prototype,"title",void 0);a("f5a1");m.render=j;var v=m;const y={class:"chart-container"},C=Object(s["h"])("canvas",null,null,-1);function x(t,e,a,r,o,c){return Object(s["q"])(),Object(s["d"])("div",y,[C])}class k extends O["d"]{mounted(){this.chart=new i["e"](this.$el.querySelector("canvas"),{type:this.chartType,data:{labels:this.chartLabels,datasets:this.chartDatasets},options:this.chartOptions})}unmounted(){var t;null===(t=this.chart)||void 0===t||t.destroy()}onDatasetChanged(t,e){this.chart&&(this.chart.data.datasets=t)}onLabelsUpdated(t,e){this.chart&&(this.chart.data.labels=t)}}Object(l["c"])([Object(O["c"])({type:String,required:!0})],k.prototype,"chartType",void 0),Object(l["c"])([Object(O["c"])({type:Array,required:!0})],k.prototype,"chartDatasets",void 0),Object(l["c"])([Object(O["c"])({type:Array})],k.prototype,"chartLabels",void 0),Object(l["c"])([Object(O["c"])({type:Object})],k.prototype,"chartOptions",void 0),Object(l["c"])([Object(O["e"])("chartDataset")],k.prototype,"onDatasetChanged",null),Object(l["c"])([Object(O["e"])("chartLabels")],k.prototype,"onLabelsUpdated",null);a("e29f");k.render=x;var w=k;let T=class extends O["d"]{constructor(){super(...arguments),this.options={scales:{x:{type:"time",time:{unit:"month",tooltipFormat:"yyyy-MM",displayFormats:{month:"yyyy-MM"}}}},plugins:{tooltip:{mode:"x"}}}}get datasets(){var t,e;const a=this.$store.state.nominations,s=new Map,r=new Map;if(a.length>0){let o=p["DateTime"].fromMillis(a[0].confirmedTime).startOf("month").valueOf(),c=o;for(const n of a){if(n.confirmedTime>0){const e=p["DateTime"].fromMillis(n.confirmedTime).startOf("month").valueOf();e<o?o=e:e>c&&(c=e),s.set(e,(null!==(t=s.get(e))&&void 0!==t?t:0)+1)}if(n.resultTime>0){const t=p["DateTime"].fromMillis(n.resultTime).startOf("month").valueOf();t>c&&(c=t),r.set(t,(null!==(e=r.get(t))&&void 0!==e?e:0)+1)}}g(s,o,c),g(r,o,c)}const o=[],c=[];for(const[i,u]of s)o.push({x:i,y:u});for(const[i,u]of r)c.push({x:i,y:u});o.sort((t,e)=>t.x-e.x),c.sort((t,e)=>t.x-e.x);const n={label:"Submissions",data:o,borderColor:"orange",pointBackgroundColor:"orange",pointRadius:0,fill:!1},l={label:"Results",data:c,borderColor:"royalblue",pointBackgroundColor:"royalblue",pointRadius:0,fill:!1};return[n,l]}};T=Object(l["c"])([Object(O["b"])({components:{ChartBlock:v,ChartView:w}})],T);var M=T;M.render=b;var B=M;function D(t,e,a,r,o,c){const n=Object(s["x"])("chart-view"),l=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(l,{title:"Interval (Days)"},{default:Object(s["C"])(()=>[Object(s["h"])(n,{"chart-type":"bar","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1})}var q,A=a("ce89");let R=q=class extends O["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!1}}}}get labels(){return this.stats.map(t=>t.interval)}get datasets(){const t=this.stats.map(t=>t.count),e={data:t,backgroundColor:"royalblue",hoverBackgroundColor:"royalblue"};return[e]}get stats(){const t=this.$store.state.nominations,e=t.reduce((t,e)=>{var a;if(e.status===A["a"].StatusCode.Pending)return t;if(e.confirmedTime<q.timeValid)return t;if(e.resultTime<q.timeValid)return t;if(e.resultTime<e.confirmedTime)return t;const s=Math.floor((e.resultTime-e.confirmedTime)/q.timeDay);return t.set(s,(null!==(a=t.get(s))&&void 0!==a?a:0)+1),t},new Map),a=[];for(const[s,r]of e)a.push({interval:s,count:r});return a.sort((t,e)=>t.interval-e.interval),a}};R.timeValid=1325347200,R.timeDay=864e5,R=q=Object(l["c"])([Object(O["b"])({components:{ChartBlock:v,ChartView:w}})],R);var S=R;S.render=D;var V,$=S;function L(t,e,a,r,o,c){const n=Object(s["x"])("chart-view"),l=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(l,{title:"Quotas (Days)"},{default:Object(s["C"])(()=>[Object(s["h"])(n,{"chart-type":"bar","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1})}let _=V=class extends O["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!1}}}}get labels(){const t=[];for(let e=0;e<14;e++)t.push(e);return t}get datasets(){const t=this.$store.state.nominations,e=Date.now(),a=new Array(14).fill(0);for(const r of t){const t=r.restoreTime;t>e&&(a[Math.floor((t-e)/V.timeDay)]+=1)}const s={data:a,backgroundColor:"royalblue",hoverBackgroundColor:"royalblue"};return[s]}};_.timeDay=864e5,_=V=Object(l["c"])([Object(O["b"])({components:{ChartBlock:v,ChartView:w}})],_);var F=_;F.render=L;var I=F;function J(t,e,a,r,o,c){const n=Object(s["x"])("chart-view"),l=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(l,{title:"Reasons"},{default:Object(s["C"])(()=>[Object(s["h"])(n,{"chart-type":"doughnut","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.opitons},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1})}let Q=class extends O["d"]{constructor(){super(...arguments),this.opitons={plugins:{legend:{display:!0,position:"right"}}}}get labels(){const t=this.stats,e=[];for(const a of t.values())a[1]<1||e.push(a[0].title);return e}get datasets(){const t=this.stats,e=[],a=[];for(const r of t.values())r[1]<1||(e.push(r[1]),a.push(r[0].color));const s={data:e,backgroundColor:a,borderAlign:"inner",borderColor:"rgba(0, 0, 0, 0.2)",hoverBackgroundColor:a,hoverBorderColor:"rgba(0, 0, 0, 0.4)"};return[s]}get stats(){const t=new Map;for(const[e,a]of A["a"].reason)t.set(e,[a,0]);return this.$store.state.nominations.reduce((t,e)=>{if(e.status!==A["a"].StatusCode.Rejected)return t;if(e.reasons.length>0)for(const a of e.reasons)t.get(a)[1]++;else t.get(A["a"].Reason.undeclared)[1]++;return t},t),t}};Q=Object(l["c"])([Object(O["b"])({components:{ChartBlock:v,ChartView:w}})],Q);var U=Q;U.render=J;var z,P=U;function W(t,e,a,r,o,c){const n=Object(s["x"])("chart-view"),l=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(l,{title:"Status"},{default:Object(s["C"])(()=>[Object(s["h"])(n,{"chart-type":"doughnut","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1})}let E=z=class extends O["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!0,position:"right"}}}}get labels(){const t=[];for(const e of A["a"].status.values())t.push(e.title);return t}get datasets(){const t=new Map;for(const s of A["a"].status.keys())t.set(s,0);this.$store.state.nominations.reduce((t,e)=>(t.set(e.status,t.get(e.status)+1),t),t);const e=[];for(const s of t.values())e.push(s);const a={data:e,backgroundColor:z.colors,borderAlign:"inner",borderColor:"rgba(0, 0, 0, 0.2)",hoverBackgroundColor:z.colors,hoverBorderColor:"rgba(0, 0, 0, 0.4)"};return[a]}};E.colors=["#CAAF85","#35C572","#B0373C"],E=z=Object(l["c"])([Object(O["b"])({components:{ChartBlock:v,ChartView:w}})],E);var G=E;G.render=W;var H=G;let K=class extends u["b"]{created(){i["e"].register(i["a"],i["c"],i["i"],i["l"],i["b"],i["f"],i["h"],i["d"],i["j"],i["k"],i["m"],i["n"],i["g"]),i["e"].defaults.maintainAspectRatio=!1,i["e"].defaults.plugins.legend.labels.boxWidth=10,i["e"].defaults.plugins.tooltip.intersect=!1,i["e"].defaults.elements.line.tension=.1}};K=Object(l["c"])([Object(u["a"])({components:{MaterialTopAppBar:d["a"],MaterialTopAppBarAdjust:h["a"],StatusChart:H,ReasonsChart:P,CountByMonthChart:B,IntervalChart:$,QuotasChart:I}})],K);var N=K;a("d567");N.render=n;e["default"]=N},"715e":function(t,e,a){},a808:function(t,e,a){},d567:function(t,e,a){"use strict";a("715e")},db9b:function(t,e,a){},e29f:function(t,e,a){"use strict";a("a808")},f5a1:function(t,e,a){"use strict";a("db9b")}}]);
//# sourceMappingURL=charts.9157d5d1.js.map
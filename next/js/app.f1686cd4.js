(function(e){function t(t){for(var n,a,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&u.push(i[a][0]),i[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);h&&h(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,a=1;a<s.length;a++){var o=s[a];0!==i[o]&&(n=!1)}n&&(r.splice(t--,1),e=c(c.s=s[0]))}return e}var n={},a={app:0},i={app:0},r=[];function o(e){return c.p+"js/"+({"charts~dashboard~details~list~map~match~preferences":"charts~dashboard~details~list~map~match~preferences",charts:"charts",dashboard:"dashboard","details~map":"details~map",details:"details",map:"map",list:"list",match:"match",preferences:"preferences",mapbox:"mapbox"}[e]||e)+"."+{"charts~dashboard~details~list~map~match~preferences":"4ace817a",charts:"0ad54631",dashboard:"d8888b56","details~map":"df86ac01",details:"20576827",map:"c0b7e21c",list:"db1fd2a0",match:"18935d21",preferences:"dc8d95ad",mapbox:"2dcfe6ae"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(e){var t=[],s={"charts~dashboard~details~list~map~match~preferences":1,charts:1,dashboard:1,"details~map":1,details:1,map:1,list:1,match:1,preferences:1};a[e]?t.push(a[e]):0!==a[e]&&s[e]&&t.push(a[e]=new Promise((function(t,s){for(var n="css/"+({"charts~dashboard~details~list~map~match~preferences":"charts~dashboard~details~list~map~match~preferences",charts:"charts",dashboard:"dashboard","details~map":"details~map",details:"details",map:"map",list:"list",match:"match",preferences:"preferences",mapbox:"mapbox"}[e]||e)+"."+{"charts~dashboard~details~list~map~match~preferences":"456360f3",charts:"1ac5002e",dashboard:"f9cc735b","details~map":"370ca2bc",details:"e45c7c88",map:"dc687b38",list:"6a9f041e",match:"4e5ee524",preferences:"a2815486",mapbox:"31d6cfe0"}[e]+".css",i=c.p+n,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var l=r[o],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===n||d===i))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],d=l.getAttribute("data-href");if(d===n||d===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||i,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete a[e],h.parentNode.removeChild(h),s(r)},h.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(h)})).then((function(){a[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,s){n=i[e]=[t,s]}));t.push(n[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(h);var s=i[e];if(0!==s){if(s){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,s[1](u)}i[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(s,n,function(t){return e[t]}.bind(null,n));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/next/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var h=d;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"0613":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n,a=s("5502");(function(e){let t;(function(e){e[e["idle"]=0]="idle",e[e["processingMails"]=1]="processingMails",e[e["requestMatch"]=2]="requestMatch",e[e["syncing"]=3]="syncing"})(t=e.Status||(e.Status={}))})(n||(n={})),t["b"]=Object(a["a"])({state:{status:n.Status.idle,progress:0,gapiLoaded:!1,gapiAuthed:!1,nominations:[]},getters:{empty(e){return e.nominations.length<1},count:e=>t=>e.nominations.filter(t).length},mutations:{setStatus(e,t){e.status=t},setProgress(e,t){e.progress=t},gapiLoaded(e){e.gapiLoaded=!0},setGAPIAuthed(e,t){e.gapiAuthed=t},setNominations(e,t){e.nominations=t},deleteNomination(e,t){e.nominations=e.nominations.filter(e=>e.id!==t)}},actions:{},modules:{}})},1703:function(e,t,s){"use strict";var n=s("7a23");const a=Object(n["h"])("span",{class:"mdc-button__ripple"},null,-1),i={class:"mdc-button__label"};function r(e,t,s,r,o,c){return Object(n["q"])(),Object(n["d"])("button",{class:e.className},[a,Object(n["h"])("span",i,[Object(n["w"])(e.$slots,"default")])],2)}var o=s("9ab4"),c=s("40ff"),l=s("1b40");class d extends l["d"]{get className(){let e="mdc-button";return this.outlined?e+=" mdc-button--outlined":this.raised&&(e+=" mdc-button--raised"),e}mounted(){this.ctrl=c["a"].attachTo(this.$el),this.ctrl.unbounded=!0}updated(){var e;null===(e=this.ctrl)||void 0===e||e.destroy(),this.ctrl=c["a"].attachTo(this.$el),this.ctrl.unbounded=!0}unmounted(){var e;null===(e=this.ctrl)||void 0===e||e.destroy()}}Object(o["c"])([Object(l["c"])(Boolean)],d.prototype,"outlined",void 0),Object(o["c"])([Object(l["c"])(Boolean)],d.prototype,"raised",void 0);s("2eea");d.render=r;t["a"]=d},"20de":function(e,t,s){"use strict";s("33a0")},"2eea":function(e,t,s){"use strict";s("9408")},"33a0":function(e,t,s){},"35b6":function(e,t,s){},"39e4":function(e,t,s){},"42b4":function(e,t,s){"use strict";var n;s.d(t,"a",(function(){return n})),function(e){function t(t){e.events.alert(t)}function s(t){e.events.inform(t)}e.events={alert:()=>{},inform:()=>{}},e.alert=t,e.inform=s}(n||(n={}))},"4f53":function(e,t,s){},5558:function(e,t,s){"use strict";s("de57")},6022:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("9ab4"),a=s("a1e9");class i{constructor(){this.events={authStatusChanged:()=>{},error:()=>{}}}init(){navigator.onLine&&gapi.load("client:auth2",()=>this.initClient())}initClient(){gapi.client.init({apiKey:"AIzaSyCqIaS8UizqjWrIKm5zV3_S8EffCWjKR-A",clientId:"361295761775-qshg0f5buh495dhubp4v5bignk7i5dh1.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:["https://www.googleapis.com/auth/gmail.readonly","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appdata"].join(" ")}).then(()=>{gapi.auth2.getAuthInstance().isSignedIn.listen(this.events.authStatusChanged),this.events.authStatusChanged(this.signedIn)},this.events.error)}get signedIn(){return navigator.onLine&&gapi.auth2.getAuthInstance().isSignedIn.get()}get accessToken(){return gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token}signIn(){gapi.auth2.getAuthInstance().signIn()}signOut(){gapi.auth2.getAuthInstance().signOut()}}class r{constructor(){this.ids=new Map}download(e,t){const s=n=>{if(n.length<1)return void t();const a=n[0].id;gapi.client.drive.files.get({fileId:a,alt:"media"}).then(i=>{t(i.result)?(gapi.client.drive.files.delete({fileId:a}),n.splice(0,1),s(n)):this.ids.set(e,a)})};gapi.client.drive.files.list({q:`name = '${e}'`,pageSize:10,spaces:r.folder,fields:"files(id)"}).then(e=>{const n=e.result.files;n?s(n):t()})}upload(e,t,s,n,a){let i="",o="";const c={name:e,mimeType:t};this.ids.has(e)?(o="PATCH",i=`https://www.googleapis.com/upload/drive/v3/files/${this.ids.get(e)}?uploadType=multipart`):(o="POST",i="https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",c.parents=[r.folder]);const l=new FormData;l.append("metadata",new Blob([JSON.stringify(c)],{type:t})),l.append("file",s);const d="Bearer "+n;fetch(i,{method:o,headers:new Headers({Authorization:d}),body:l}).then(e=>e.json()).then(t=>{t&&t.id?(this.ids.set(e,t.id),a(!0)):a(!1,t.message)}).catch(()=>a(!1))}}r.folder="appDataFolder";class o{constructor(){this.auth=new i,this.drive=new r}init(e){const t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.defer=!0,t.async=!0,t.onload=e,document.head.append(t)}}var c,l=s("b15b"),d=s("ce89"),u=s("a7a0");(function(e){function t(e,t,i){const r=new u["a"];r.status=t,r.scanner=i,t===d["a"].StatusCode.Pending?(r.confirmedTime=parseInt(e.internalDate),r.confirmationMailId=e.id):(r.resultTime=parseInt(e.internalDate),r.resultMailId=e.id);for(const s of e.payload.headers)if("Subject"===s.name){const e=s.value.match(/[:：](.+)/);e&&e.length>1&&(r.title=e[1].trim());break}for(const o of e.payload.parts){if("1"!==o.partId)continue;const e=a(o.body.data),c=e.match(/(?:googleusercontent|ggpht)\.com\/([0-9a-zA-Z\-\_]+)/);c&&c.length>1&&(r.image=c[1],r.id=u["a"].parseId(r.image)),i===d["a"].ScannerCode.Redacted&&t!==d["a"].StatusCode.Pending&&(r.lngLat=n(e)),t===d["a"].StatusCode.Rejected&&(r.status=d["a"].StatusCode.Rejected,r.reasons=s(e,i));break}return r}function s(e,t){const s=e.match(/(\n|\r|.)+?\-NianticOps/);if(!s||s.length<1)return[];const n=s[0],a=[];for(const[i,r]of d["a"].reason){const e=r.keywords.get(t);if(e)for(const t of e){const e=n.search(t);if(!(e<0)){a.push([e,i]);break}}}return a.sort((e,t)=>e[0]>t[0]?1:-1).map(e=>e[1])}function n(e){const t=e.match(/www\.ingress\.com\/intel\?ll\=([\.\d]+),([\.\d]+)/);if(t&&!(t.length<3))return{lng:parseFloat(t[2]),lat:parseFloat(t[1])}}function a(e){return unescape(decodeURIComponent(escape(window.atob(e.replace(/\-/g,"+").replace(/\_/g,"/")))))}e.parse=t})(c||(c={}));class h{constructor(){this.total=0,this.finished=0}clear(){this.total=0,this.finished=0}get left(){return this.finished<this.total}get percent(){return 0===this.total?0:this.finished/this.total}}class m{constructor(){this.lists=new h,this.messages=new h,this.onProgress=()=>{},this.onFinish=()=>{}}clear(){this.lists.clear(),this.messages.clear()}addList(){this.lists.total+=1}finishList(e){this.lists.finished+=1,this.messages.total+=e,this.onProgress(this.percent),console.log(`Mari progress: [list][${this.lists.finished}/${this.lists.total}]`),this.left||this.onFinish()}finishMessage(){this.messages.finished+=1,console.log(`Mari progress: [message][${this.messages.finished}/${this.messages.total}]`),this.lists.left||(this.onProgress(this.percent),this.left||this.onFinish())}get left(){return this.lists.left||this.messages.left}get percent(){return 0===this.lists.total||0===this.messages.total?0:this.lists.left?.2*this.lists.percent:.2+.8*this.messages.percent}}class p{constructor(){this.queryAfter="",this.ignoreMailIds=[],this.nominations=[],this.progress=new m,this.events={alert:()=>{},finish:()=>{},progress:()=>{}}}init(){this.progress.onProgress=e=>{this.events.progress(e)},this.progress.onFinish=()=>{this.events.finish(this.nominations)}}start(e){if(this.nominations=e.map(e=>e),this.progress.lists.clear(),this.progress.messages.clear(),this.ignoreMailIds=this.nominations.flatMap(e=>e.resultMailId.length>0?[e.confirmationMailId,e.resultMailId]:[e.confirmationMailId]),l["a"].general.queryAfterLatest()){const e=Math.floor(this.nominations.reduce((e,t)=>Math.max(e,t.confirmedTime,t.resultTime),0)/1e3);this.queryAfter=" after:"+e}else this.queryAfter="";for(const t of d["a"].status.values())for(const e of t.queries.keys())this.queryList(t.code,e)}queryList(e,t){this.progress.addList();const s=this.getListRequest(void 0,e,t);s.execute(s=>{this.handleListRequest(s,[],e,t)})}getListRequest(e,t,s){return gapi.client.gmail.users.messages.list({userId:"me",q:`${d["a"].status.get(t).queries.get(s)}${this.queryAfter}`,pageToken:e})}handleListRequest(e,t,s,n){if(e.result.messages&&t.push(...e.result.messages),e.result.nextPageToken){const a=this.getListRequest(e.result.nextPageToken,s,n);a.execute(e=>{this.handleListRequest(e,t,s,n)})}else{for(let e=t.length-1;e>=0;e--)for(const s of this.ignoreMailIds)if(t[e].id===s){t.splice(e,1);break}this.queryMessages(t,s,n)}}queryMessages(e,t,s){this.progress.finishList(e.length);for(const n of e)n.id&&gapi.client.gmail.users.messages.get({userId:"me",id:n.id,format:"full",metadataHeaders:"Subject"}).execute(e=>{const n=e.result;try{const e=c.parse(n,t,s);this.nominations.push(e)}catch(a){let e="";for(const t of n.payload.headers)if("Subject"===t.name){e=t.value;break}let i=a;if("message"in a){const e=a;i=e.stack||e.message}this.events.alert(`message:service.mari.reportParserError ${e} [${t}:${s}]${i}`)}this.progress.finishMessage()})}}var g,f=s("42b4");(function(e){const t=1;let s=void 0;function a(){return Object(n["b"])(this,void 0,void 0,(function*(){return new Promise((e,n)=>{const a=window.indexedDB.open("potori",t);a.onsuccess=()=>{s=a.result,e(!0)},a.onerror=()=>n(a.error),a.onupgradeneeded=()=>{a.result.createObjectStore("nomination",{keyPath:"id",autoIncrement:!1})}})}))}function i(){return Object(n["b"])(this,void 0,void 0,(function*(){return new Promise((e,t)=>{const s=d("readonly");if(!s)return void t();const n=s.getAll();n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}))}function r(e){const t=d("readwrite");if(t)for(const s of e)t.put(s)}function o(e){const t=d("readwrite");t&&t.put(e)}function c(e){const t=d("readwrite");t&&t.delete(e)}function l(){const e=d("readwrite");e&&e.clear()}function d(e){if(s)return s.transaction(["nomination"],e).objectStore("nomination")}e.init=a,e.load=i,e.saveAll=r,e.save=o,e.remove=c,e.clear=l})(g||(g={}));var b,v=s("0613");(function(e){let t;(function(e){e["nominations"]="nominations.json",e["legacy"]="potori.json"})(t||(t={}));const s="application/json",i=new o,r=new p;let c;function h(t){c=t,window.addEventListener("error",t=>{e.errors.push(t)}),N(),i.init(()=>{i.auth.events.authStatusChanged=e=>{c.commit("setGAPIAuthed",e),c.commit("gapiLoaded")},i.auth.init(),r.events.alert=e=>{f["a"].alert(e)},r.events.progress=e=>{_(e)},r.events.finish=e=>{x(e)},r.init()})}function m(){i.auth.signIn()}function b(){i.auth.signOut()}function y(){l["a"].google.sync()?E(t.nominations,()=>{C()}):C()}function w(){E(t.nominations,()=>{j(()=>{})})}function j(e){q(v["a"].Status.syncing);const n=D();i.drive.upload(t.nominations,s,n,i.auth.accessToken,(t,s)=>{q(v["a"].Status.idle),e(t,s)})}function O(){E(t.legacy,e=>{})}function S(e){const t=document.createElement("input");t.type="file",t.accept="json",t.hidden=!0,t.addEventListener("change",()=>{if(setTimeout(()=>{t.remove()},1e3),!t.files||t.files.length<1)return;const s=t.files[0],n=new FileReader;n.onload=()=>{if("string"===typeof n.result)try{const t=JSON.parse(n.result),s=$(t);e(s)}catch(t){e(0)}},n.readAsText(s)},!1),document.body.append(t),t.click()}function k(){const e=document.createElement("a");e.href=URL.createObjectURL(D()),e.download=t.nominations,e.hidden=!0,document.body.append(e),e.click(),e.remove()}function I(e){let t;try{t=JSON.parse(e)}catch(i){return-1}if(!t.result||t.result.length<1)return-2;const s=c.state.nominations,n=s.reduce((e,t)=>(e.set(t.id,t),e),new Map);let a=0;for(const r of t.result){const e=r.imageUrl.replace("https://lh3.googleusercontent.com/",""),t=u["a"].parseId(e),s=n.get(t);s&&(s.title=r.title,s.lngLat={lng:parseFloat(r.lng),lat:parseFloat(r.lat)},a+=1)}return T(),a}function M(e){g.save(Object(a["o"])(e))}function P(){g.clear(),c.commit("setNominations",[])}function A(e){g.remove(e),c.commit("deleteNomination",e)}function T(){const e=R();g.saveAll(e)}function C(){_(0),q(v["a"].Status.processingMails),r.start(R())}function x(e){const t=[],s=e.reduce((e,s)=>{if(s.id.length<1)return console.log(`service.arrange: Need match: #${s.id}[${s.title}]`),t.push(s),e;let n=!1;for(const t of e)if(t.merge(s)){n=!0;break}return n||e.push(s),e},new Array);console.log(`service.arrange: ${e.length} reduced to ${s.length}`),t.length>0?L(t,s):l["a"].google.sync()?j(()=>{F(s)}):F(s)}function L(t,s){const n=s.filter(d["a"].status.get(d["a"].StatusCode.Pending).predicator),a=[];for(const e of t){const t=e.scanner!==d["a"].ScannerCode.Unknown,s=n.filter(s=>s.title===e.title&&(!(s.confirmedTime>=e.resultTime)&&(!t||s.scanner===d["a"].ScannerCode.Unknown||s.scanner===s.scanner)));s.length<1||a.push({target:e,candidates:s,selected:""})}a.length<1?F(s):(e.matchData.packs=a,e.matchData.callback=()=>{e.matchData.callback=()=>{};for(const t of e.matchData.packs)if(!(t.selected.length<1)){for(const e of t.candidates)if(e.id===t.selected){t.target.image=e.image,t.target.id=e.id;break}if(!(t.target.id.length<1))for(const e of s)e.merge(t.target)}e.matchData.packs=[],F(s)},q(v["a"].Status.requestMatch))}function F(e){c.commit("setNominations",e),T(),q(v["a"].Status.idle)}function q(e){c.commit("setStatus",e)}function _(e){c.commit("setProgress",e)}function E(e,t){q(v["a"].Status.syncing),i.drive.download(e,e=>{if(!e)return t(0),!1;try{const s=$(e);t(s)}catch(s){return!0}return!1})}function $(e){let t=0;try{const s=e.map(e=>u["a"].from(e)),n=c.state.nominations.map(e=>e);for(const e of s){let s=!1;for(const a of n)if(s=a.merge(e),s){t+=1;break}s||n.push(e)}c.commit("setNominations",n),T()}catch(s){t=0}return t}function R(){return c.state.nominations.map(e=>Object(a["o"])(e))}function D(){const e=c.state.nominations.map(e=>e.data);return new Blob([JSON.stringify(e,null,4)],{type:s})}function N(){return Object(n["b"])(this,void 0,void 0,(function*(){yield g.init();const e=yield g.load(),t=e.map(e=>u["a"].from(e));c.commit("setNominations",t)}))}e.matchData={packs:[],callback:()=>{}},e.errors=[],e.init=h,e.signIn=m,e.signOut=b,e.refresh=y,e.sync=w,e.upload=j,e.migrate=O,e.importNominationsFile=S,e.exportNominationsFile=k,e.importWayfarerJSON=I,e.update=M,e.clearNominations=P,e.deleteNomination=A,e.save=T})(b||(b={}))},"81dd":function(e,t,s){"use strict";var n=s("7a23");const a={class:"fa mdc-icon-button"};function i(e,t,s,i,r,o){const c=Object(n["x"])("material-icon-raw");return Object(n["q"])(),Object(n["d"])("button",a,[Object(n["h"])(c,{icon:e.icon},null,8,["icon"])])}var r=s("9ab4"),o=s("40ff"),c=s("1b40"),l=s("bd16");let d=class extends c["d"]{mounted(){this.ctrl=o["a"].attachTo(this.$el),this.ctrl.unbounded=!0}updated(){var e;null===(e=this.ctrl)||void 0===e||e.destroy(),this.ctrl=o["a"].attachTo(this.$el),this.ctrl.unbounded=!0}unmounted(){var e;null===(e=this.ctrl)||void 0===e||e.destroy()}};Object(r["c"])([Object(c["c"])(String)],d.prototype,"icon",void 0),d=Object(r["c"])([Object(c["b"])({components:{MaterialIconRaw:l["a"]}})],d);var u=d;s("ea19");u.render=i;t["a"]=u},9408:function(e,t,s){},a7a0:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("ce89");const a="service.nomination",i={day:a+".day",missing:a+".missing",messageParseErrorMissingId:`message:${a}.parseErrorMissingId`,messageParseErrorMissingTitle:`message:${a}.parseErrorMissingTitle`,messageParseErrorMissingImage:`message:${a}.parseErrorMissingImage`,messageParseErrorInvalidId:`message:${a}.parseErrorInvalidId`,messageParseErrorInvalidImage:`message:${a}.parseErrorInvalidImage`};class r{constructor(){this.id="",this.title="",this.image="",this.scanner=n["a"].ScannerCode.Unknown,this.status=n["a"].StatusCode.Pending,this.reasons=[],this.confirmedTime=0,this.confirmationMailId="",this.resultTime=0,this.resultMailId="",this.lngLat=void 0}get imageUrl(){return"https://lh4.googleusercontent.com/"+this.image}get intelUrl(){return this.lngLat?`https://intel.ingress.com/intel?ll=${this.lngLat.lat},${this.lngLat.lng}&z=18`:"https://intel.ingress.com/intel"}get bsUrl(){return"https://brainstorming.azurewebsites.net/watermeter.html#"+this.id}get scannerData(){return n["a"].scanner.get(this.scanner)}get statusData(){return n["a"].status.get(this.status)}get reasonsData(){return this.reasons.map(e=>n["a"].reason.get(e))}get restoreTime(){return this.confirmedTime+12096e5}get data(){let e={id:this.id,title:this.title,image:this.image,scanner:this.scanner,status:this.status,confirmedTime:this.confirmedTime/1e3,confirmationMailId:this.confirmationMailId};return this.reasons.length>0&&(e.reasons=this.reasons),this.resultTime&&(e.resultTime=this.resultTime/1e3),this.resultMailId&&(e.resultMailId=this.resultMailId),this.lngLat&&(e.lngLat={lng:this.lngLat.lng,lat:this.lngLat.lat}),e}merge(e){return this.id===e.id&&(this.status===n["a"].StatusCode.Pending?(this.title=e.title,this.status=e.status,this.reasons=e.reasons,this.resultTime=e.resultTime,this.resultMailId=e.resultMailId):(this.confirmedTime=e.confirmedTime,this.confirmationMailId=e.confirmationMailId),this.lngLat||(this.lngLat=e.lngLat),!0)}static from(e){if(!e.id)throw new Error(i.messageParseErrorMissingId);if(!e.title)throw new Error(i.messageParseErrorMissingTitle);if(!e.image)throw new Error(i.messageParseErrorMissingImage);const t=e.image.replace("\r","");if(!/^[a-zA-Z0-9]+$/.test(e.id))throw new Error(i.messageParseErrorInvalidId);if(!/^[0-9a-zA-Z\-\_]+$/.test(t))throw new Error(i.messageParseErrorInvalidImage);const s=new r;if(s.id=e.id,s.title=e.title,s.image=t,e.scanner&&(s.scanner=e.scanner),e.status===n["a"].StatusCode.Pending?s.status=n["a"].StatusCode.Pending:e.status===n["a"].StatusCode.Accepted?s.status=n["a"].StatusCode.Accepted:(s.status=n["a"].StatusCode.Rejected,e.status!==n["a"].Reason.undeclared&&n["a"].reason.has(e.status)&&s.reasons.push(e.status)),e.reasons)for(const a of e.reasons)n["a"].reason.has(a)&&!s.reasons.includes(a)&&s.reasons.push(a);return s.confirmedTime=e.confirmedTime>r.timestampSecondBound?e.confirmedTime:1e3*e.confirmedTime,s.confirmationMailId=e.confirmationMailId,e.resultTime&&(s.resultTime=e.resultTime>r.timestampSecondBound?e.resultTime:1e3*e.resultTime),e.resultMailId&&(s.resultMailId=e.resultMailId),e.lngLat&&(s.lngLat={lng:e.lngLat.lng,lat:e.lngLat.lat}),s}static parseId(e){return e.replace(/[^a-zA-Z0-9]/g,"").slice(-10).toLowerCase()}}r.timestampSecondBound=1e12,r.comparatorByTime=(e,t)=>{const s=e.resultTime?e.resultTime:e.confirmedTime,n=t.resultTime?t.resultTime:t.confirmedTime;return s<n?1:-1}},b15b:function(e,t,s){"use strict";var n;s.d(t,"a",(function(){return n})),function(e){function t(e,t){localStorage.setItem(e,JSON.stringify(t))}function s(e,t){const s=localStorage.getItem(e);return null!==s?JSON.parse(s):t}let n,a;e.set=t,e.get=s,function(t){const s="potori.pref.general.queryAfterLatest";function n(){return e.get(s,!1)}function a(t){e.set(s,t)}t.queryAfterLatest=n,t.setQueryAfterLatest=a}(n=e.general||(e.general={})),function(t){const s="potori.pref.google.sync";function n(){return e.get(s,!1)}function a(t){e.set(s,t)}t.sync=n,t.setSync=a}(a=e.google||(e.google={}))}(n||(n={}))},bd16:function(e,t,s){"use strict";var n=s("7a23");function a(e,t,s,a,i,r){return Object(n["z"])(e.symbol)}var i=s("9ab4"),r=s("1b40");const o={search:"","th-list":"",check:"",times:"",cog:"",clock:"",redo:"",edit:"","info-circle":"","arrow-left":"","arrow-up":"",plus:"","calendar-alt":"","folder-open":"","chart-bar":"",globe:"","angle-up":"","angle-down":"","ellipsis-v":"",trash:"",map:"","sync-alt":"","sign-in-alt":"","redo-alt":"",pen:"","map-marker-alt":"","mobile-alt":"","tachometer-alt":"",brain:""};class c extends r["d"]{get symbol(){return c.nameRegex.test(this.icon)?o[this.icon]:this.icon}}c.nameRegex=/^[a-z\-]+$/,Object(i["c"])([Object(r["c"])(String)],c.prototype,"icon",void 0);s("ce1e");c.render=a;t["a"]=c},cd49:function(e,t,s){"use strict";s.r(t);var n=s("7a23");function a(e,t,s,a,i,r){const o=Object(n["x"])("router-view"),c=Object(n["x"])("material-dialog"),l=Object(n["x"])("material-snackbar");return Object(n["q"])(),Object(n["d"])(n["a"],null,[Object(n["h"])(o),Object(n["h"])(c,{modelValue:e.alertOpen,"onUpdate:modelValue":t[1]||(t[1]=t=>e.alertOpen=t)},{default:Object(n["C"])(()=>[Object(n["g"])(Object(n["z"])(e.alertMessage),1)]),_:1},8,["modelValue"]),Object(n["h"])(l,{message:e.informMessage,modelValue:e.informOpen,"onUpdate:modelValue":t[2]||(t[2]=t=>e.informOpen=t)},null,8,["message","modelValue"])],64)}var i=s("9ab4"),r=s("1b40"),o=s("42b4");const c={class:"mdc-dialog"},l={class:"mdc-dialog__container"},d={class:"mdc-dialog__surface",role:"alertdialog","aria-modal":"true"},u={class:"mdc-dialog__content"},h={class:"mdc-dialog__actions"},m=Object(n["h"])("div",{class:"mdc-dialog__scrim"},null,-1);function p(e,t,s,a,i,r){const o=Object(n["x"])("material-dialog-action");return Object(n["q"])(),Object(n["d"])("div",c,[Object(n["h"])("div",l,[Object(n["h"])("div",d,[Object(n["h"])("div",u,[Object(n["w"])(e.$slots,"default")]),Object(n["h"])("div",h,[Object(n["w"])(e.$slots,"actions",{},()=>[Object(n["h"])(o,{text:"Discard",action:"close","as-default":""})])])])]),m])}var g=s("704c");function f(e,t,s,a,i,r){const o=Object(n["x"])("material-button");return Object(n["q"])(),Object(n["d"])(o,{type:"button",class:"mdc-dialog__button","data-mdc-dialog-action":e.action,"data-mdc-dialog-button-default":e.asDefault},{default:Object(n["C"])(()=>[Object(n["g"])(Object(n["z"])(e.text),1)]),_:1},8,["data-mdc-dialog-action","data-mdc-dialog-button-default"])}var b=s("1703");let v=class extends r["d"]{};Object(i["c"])([Object(r["c"])(String)],v.prototype,"action",void 0),Object(i["c"])([Object(r["c"])(Boolean)],v.prototype,"asDefault",void 0),Object(i["c"])([Object(r["c"])(String)],v.prototype,"text",void 0),v=Object(i["c"])([Object(r["b"])({components:{MaterialButton:b["a"]}})],v);var y=v;y.render=f;var w=y;let j=class extends r["d"]{onValueChanged(e,t){this.ctrl&&e&&this.ctrl.open()}mounted(){this.ctrl=g["a"].attachTo(this.$el),this.ctrl.listen("MDCDialog:closed",()=>{this.$emit("update:modelValue",!1)}),this.value&&this.ctrl.open()}unmounted(){var e,t,s;(null===(e=this.ctrl)||void 0===e?void 0:e.isOpen)&&(null===(t=this.ctrl)||void 0===t||t.close()),null===(s=this.ctrl)||void 0===s||s.destroy()}};Object(i["c"])([Object(r["a"])("modelValue",{type:Boolean,default:!1})],j.prototype,"value",void 0),Object(i["c"])([Object(r["e"])("value")],j.prototype,"onValueChanged",null),j=Object(i["c"])([Object(r["b"])({components:{MaterialDialogAction:w}})],j);var O=j;s("d65d");O.render=p;var S=O;const k={class:"mdc-snackbar"},I={class:"mdc-snackbar__surface",role:"status","aria-relevant":"additions"},M=Object(n["h"])("div",{class:"mdc-snackbar__label","aria-atomic":"false"},null,-1),P={class:"mdc-snackbar__actions","aria-atomic":"true"};function A(e,t,s,a,i,r){const o=Object(n["x"])("material-icon-button");return Object(n["q"])(),Object(n["d"])("aside",k,[Object(n["h"])("div",I,[M,Object(n["h"])("div",P,[Object(n["h"])(o,{class:"mdc-snackbar__dismiss",icon:"times"})])])])}var T=s("4226"),C=s("81dd");let x=class extends r["d"]{onMessageChanged(e,t){this.ctrl&&(this.ctrl.labelText=e)}onValueChanged(e,t){this.ctrl&&e&&this.ctrl.open()}mounted(){this.ctrl=T["a"].attachTo(this.$el),this.ctrl.labelText=this.message,this.ctrl.listen("MDCSnackbar:closed",()=>{this.$emit("update:modelValue",!1)}),this.value&&this.ctrl.open()}unmounted(){var e,t,s;(null===(e=this.ctrl)||void 0===e?void 0:e.isOpen)&&(null===(t=this.ctrl)||void 0===t||t.close()),null===(s=this.ctrl)||void 0===s||s.destroy()}};Object(i["c"])([Object(r["a"])("modelValue",{type:Boolean,default:!1})],x.prototype,"value",void 0),Object(i["c"])([Object(r["c"])(String)],x.prototype,"message",void 0),Object(i["c"])([Object(r["e"])("message")],x.prototype,"onMessageChanged",null),Object(i["c"])([Object(r["e"])("value")],x.prototype,"onValueChanged",null),x=Object(i["c"])([Object(r["b"])({components:{MaterialIconButton:C["a"]}})],x);var L=x;s("5558");L.render=A;var F=L;let q=class extends r["d"]{constructor(){super(...arguments),this.alertMessage="",this.alertOpen=!1,this.informMessage="",this.informOpen=!1}mounted(){o["a"].events.alert=e=>{this.alertMessage=e,this.alertOpen=!0},o["a"].events.inform=e=>{this.informMessage=e,this.informOpen=!0}}};q=Object(i["c"])([Object(r["b"])({components:{MaterialDialog:S,MaterialSnackbar:F}})],q);var _=q;s("20de");_.render=a;var E=_,$=s("6c02");const R=[{path:"/",name:"Dashboard",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("dashboard")]).then(s.bind(null,"7277"))},{path:"/charts",name:"Charts",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("charts")]).then(s.bind(null,"6923"))},{path:"/list",name:"List",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("list")]).then(s.bind(null,"46b1"))},{path:"/details",name:"Details",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("details~map"),s.e("details")]).then(s.bind(null,"069a"))},{path:"/map",name:"Map",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("details~map"),s.e("map")]).then(s.bind(null,"4af0"))},{path:"/preferences",name:"Preferences",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("preferences")]).then(s.bind(null,"a55d"))},{path:"/match",name:"Match",component:()=>Promise.all([s.e("charts~dashboard~details~list~map~match~preferences"),s.e("match")]).then(s.bind(null,"e21b"))}],D=Object($["a"])({history:Object($["b"])("/next/"),routes:R});var N=D,B=s("0613"),U=s("6022");U["a"].init(B["b"]),Object(n["c"])(E).use(B["b"]).use(N).mount("#app")},ce1e:function(e,t,s){"use strict";s("4f53")},ce89:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n,a=s("eded");(function(e){let t,s;(function(e){e[e["Unknown"]=0]="Unknown",e[e["Redacted"]=1]="Redacted",e[e["Prime"]=2]="Prime"})(t=e.ScannerCode||(e.ScannerCode={}));class n{constructor(e,t){this.code=e,this.title=t,this.predicator=e=>e.scanner===this.code}}e.Scanner=n,function(e){e[e["Pending"]=0]="Pending",e[e["Accepted"]=1]="Accepted",e[e["Rejected"]=101]="Rejected"}(s=e.StatusCode||(e.StatusCode={}));class i{constructor(e,t,s,n){this.code=e,this.title=t,this.icon=s,this.queries=n,this.predicator=e=>e.status===this.code}}e.Status=i;class r{constructor(e,t,n,a,i){this.code=e,this.title=t,this.icon=n,this.color=a,this.keywords=i,e===r.undeclared?this.predicator=e=>e.status===s.Rejected&&e.reasons.length<1:this.predicator=t=>t.status===s.Rejected&&t.reasons.indexOf(e)>-1}}r.undeclared=101,r.duplicated=102,r.close=103,e.Reason=r,e.scanner=a.scanners.reduce((e,t)=>{const s=new n(t.code,t.title);return e.set(s.code,s),e},new Map),e.status=a.statuses.reduce((e,t)=>{const s=new i(t.code,t.title,t.iconFA,t.queries.reduce((e,t)=>(e.set(t.scanner,t.query),e),new Map));return e.set(s.code,s),e},new Map),e.reason=a.reasons.reduce((e,t)=>{const s=new r(t.code,t.title,t.iconFA,t.color,t.keywords.reduce((e,t)=>(e.set(t.scanner,t.keywords),e),new Map));return e.set(s.code,s),e},new Map)})(n||(n={}))},d65d:function(e,t,s){"use strict";s("35b6")},de57:function(e,t,s){},ea19:function(e,t,s){"use strict";s("39e4")},eded:function(e){e.exports=JSON.parse('{"version":"11","scanners":[{"code":0,"title":"Unknown"},{"code":1,"title":"Redacted"},{"code":2,"title":"Prime"}],"statuses":[{"code":0,"title":"data.pending","iconFA":"","iconSF":"clock","queries":[{"scanner":1,"query":"{from:ingress-support@nianticlabs.com from:ingress-support@google.com} {subject:\\"Portal submission confirmation\\" subject:\\"Ingress Portal Submitted\\"} -edit -photo"},{"scanner":2,"query":"from:nominations@portals.ingress.com subject:(\\"能量塔提交確認\\" OR \\"Portal申請の受領確認\\" OR \\"Portal submission confirmation\\") -AP"}]},{"code":1,"title":"data.accepted","iconFA":"","iconSF":"checkmark.circle","queries":[{"scanner":1,"query":"{from:ingress-support@nianticlabs.com from:ingress-support@google.com} {subject:\\"Portal review complete\\" subject:\\"Ingress Portal Live\\"} {\\"now available\\" \\"will be enabled\\"} -edit -photo"},{"scanner":2,"query":"from:nominations@portals.ingress.com Intel Map AP"}]},{"code":101,"title":"data.rejected","iconFA":"","iconSF":"xmark.circle","queries":[{"scanner":1,"query":"{from:ingress-support@nianticlabs.com from:ingress-support@google.com} subject:{\\"Portal review complete\\" \\"Ingress Portal Rejected\\" \\"Ingress Portal Duplicate\\"} {reviewed duplicate} -edit -photo -AP"},{"scanner":2,"query":"from:nominations@portals.ingress.com subject:(\\"能量塔審查完畢\\" OR \\"Portal審査の完了\\" OR \\"Portal review complete\\") -AP"}]}],"reasons":[{"code":101,"title":"data.undeclared","iconFA":"","iconSF":"xmark.circle","color":"#B0373C","keywords":[]},{"code":102,"title":"data.duplicated","iconFA":"","iconSF":"doc.on.doc","color":"#5E90B8","keywords":[{"scanner":1,"keywords":["duplicate of either an existing Portal","duplicate of an existing Portal"]},{"scanner":2,"keywords":["duplicate of an existing Portal"]}]},{"code":103,"title":"data.close","iconFA":"","iconSF":"ruler","color":"#009345","keywords":[{"scanner":1,"keywords":["is too close to an existing Portal"]},{"scanner":2,"keywords":["能量塔過近","too close to"]}]},{"code":226,"title":"data.criteriaCriteria","iconFA":"","iconSF":"xmark.octagon","color":"#B80233","keywords":[{"scanner":2,"keywords":["meet acceptance criteria"]}]},{"code":236,"title":"data.criteriaNatural","iconFA":"","iconSF":"leaf","color":"#5F8FAD","keywords":[{"scanner":2,"keywords":["be a natural feature"]}]},{"code":246,"title":"data.criteriaTemporary","iconFA":"","iconSF":"circle.dashed","color":"#647372","keywords":[{"scanner":2,"keywords":["seasonal display"]}]},{"code":281,"title":"data.criteriaGeneric","iconFA":"","iconSF":"shippingbox","color":"#F0C649","keywords":[{"scanner":2,"keywords":["generic store"]}]},{"code":331,"title":"data.locationMismatched","iconFA":"","iconSF":"mappin.slash","color":"#C28282","keywords":[{"scanner":2,"keywords":["accurately reflects the submitted"]}]},{"code":341,"title":"data.pedestrian","iconFA":"","iconSF":"figure.walk","color":"#B084AC","keywords":[{"scanner":2,"keywords":["acceptable pedestrian pathway"]}]},{"code":346,"title":"data.locationPrivate","iconFA":"","iconSF":"lock","color":"#5A4C4C","keywords":[{"scanner":2,"keywords":["private residential"]}]},{"code":426,"title":"data.photoPlate","iconFA":"","iconSF":"car","color":"#004DB5","keywords":[{"scanner":2,"keywords":["license plate"]}]},{"code":431,"title":"data.photoQuality","iconFA":"","iconSF":"photo","color":"#5A715F","keywords":[{"scanner":2,"keywords":["Photo is low quality"]}]}]}')}});
//# sourceMappingURL=app.f1686cd4.js.map
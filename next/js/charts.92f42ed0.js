(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["charts"],{"16f8":function(t){t.exports=JSON.parse('{"en":{"title":"Charts"},"zh":{"title":"图表"}}')},"24c7":function(t,e,a){},"3fde":function(t){t.exports=JSON.parse('{"en":{"title":"Status"},"zh":{"title":"状态"}}')},6923:function(t,e,a){"use strict";a.r(e);var s=a("7a23");const o={key:0,class:"charts"},r={class:"grid grid--1-2"},n={class:"grid grid--2-1"};function i(t,e,a,i,c,l){const u=Object(s["A"])("material-top-app-bar"),d=Object(s["A"])("material-top-app-bar-adjust"),b=Object(s["A"])("status-chart"),h=Object(s["A"])("reasons-chart"),p=Object(s["A"])("count-by-month-chart"),f=Object(s["A"])("interval-chart"),O=Object(s["A"])("quotas-chart");return Object(s["t"])(),Object(s["e"])(s["a"],null,[Object(s["i"])(u,{title:t.$t("title"),"navi-back":""},null,8,["title"]),Object(s["i"])(d),t.$store.getters.empty?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["e"])("main",o,[Object(s["i"])("div",r,[Object(s["i"])(b),Object(s["i"])(h)]),Object(s["i"])(p),Object(s["i"])("div",n,[Object(s["i"])(f),Object(s["i"])(O)])]))],64)}var c=a("9ab4"),l=a("9b4a"),u=(a("cadc"),a("ce1f")),d=a("2281"),b=a("4892");function h(t,e,a,o,r,n){const i=Object(s["A"])("chart-view"),c=Object(s["A"])("chart-block");return Object(s["t"])(),Object(s["e"])(c,{title:t.$t("title")},{default:Object(s["F"])(()=>[Object(s["i"])(i,{"chart-type":"line","chart-datasets":t.datasets,"chart-options":t.options},null,8,["chart-datasets","chart-options"])]),_:1},8,["title"])}var p=a("1315"),f=a("1b40"),O=a("2e5e"),j=a("240d"),v=a("6163"),m=a("7607");let g=class extends f["d"]{constructor(){super(...arguments),this.datasets=[],this.options={scales:{x:{type:"time",time:{unit:"month",tooltipFormat:"yyyy-MM",displayFormats:{month:"yyyy-MM"}}}},plugins:{tooltip:{mode:"x"}}}}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}updateData(){var t,e;return Object(c["b"])(this,void 0,void 0,(function*(){const a=yield O["a"].getAll(),s=new Map,o=new Map;if(a.length>0){let r=p["DateTime"].fromMillis(a[0].confirmedTime).startOf("month").valueOf(),n=r;for(const i of a){if(i.confirmedTime>0){const e=p["DateTime"].fromMillis(i.confirmedTime).startOf("month").valueOf();e<r?r=e:e>n&&(n=e),s.set(e,(null!==(t=s.get(e))&&void 0!==t?t:0)+1)}if(i.resultTime>0){const t=p["DateTime"].fromMillis(i.resultTime).startOf("month").valueOf();t>n&&(n=t),o.set(t,(null!==(e=o.get(t))&&void 0!==e?e:0)+1)}}Object(j["b"])(s,r,n),Object(j["b"])(o,r,n)}const r=[],n=[];for(const[t,e]of s)r.push({x:t,y:e});for(const[t,e]of o)n.push({x:t,y:e});r.sort((t,e)=>t.x-e.x),n.sort((t,e)=>t.x-e.x);const i={label:this.$t("submissions"),data:r,borderColor:"orange",pointBackgroundColor:"orange",pointRadius:0,fill:!1},c={label:this.$t("results"),data:n,borderColor:"royalblue",pointBackgroundColor:"royalblue",pointRadius:0,fill:!1};this.datasets=[i,c]}))}};Object(c["c"])([Object(f["e"])("saveID")],g.prototype,"onSaved",null),g=Object(c["c"])([Object(f["b"])({components:{ChartBlock:j["a"],ChartView:v["a"]},i18n:{messages:m}})],g);var y=g;y.render=h;var C=y;function D(t,e,a,o,r,n){const i=Object(s["A"])("chart-view"),c=Object(s["A"])("chart-block");return Object(s["t"])(),Object(s["e"])(c,{title:t.$t("title")},{default:Object(s["F"])(()=>[Object(s["i"])(i,{"chart-type":"bar","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1},8,["title"])}var A,k=a("ce89"),w=a("8899");let S=A=class extends f["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!1}}},this.labels=[],this.datasets=[]}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}updateData(){return Object(c["b"])(this,void 0,void 0,(function*(){const t=yield O["a"].getAll(),e=t.reduce((t,e)=>{var a;if(e.status===k["a"].StatusCode.Pending)return t;if(e.confirmedTime<A.timeValid)return t;if(e.resultTime<A.timeValid)return t;if(e.resultTime<e.confirmedTime)return t;const s=Math.floor((e.resultTime-e.confirmedTime)/A.timeDay);return t.set(s,(null!==(a=t.get(s))&&void 0!==a?a:0)+1),t},new Map),a=[];for(const[r,n]of e)a.push({interval:r,count:n});a.sort((t,e)=>t.interval-e.interval);const s=a.map(t=>t.count),o={data:s,backgroundColor:"royalblue",hoverBackgroundColor:"royalblue"};this.labels=a.map(t=>t.interval),this.datasets=[o]}))}};S.timeValid=1325347200,S.timeDay=864e5,Object(c["c"])([Object(f["e"])("saveID")],S.prototype,"onSaved",null),S=A=Object(c["c"])([Object(f["b"])({components:{ChartBlock:j["a"],ChartView:v["a"]},i18n:{messages:w}})],S);var x=S;x.render=D;var M=x;function B(t,e,a,o,r,n){const i=Object(s["A"])("chart-view"),c=Object(s["A"])("chart-block");return Object(s["t"])(),Object(s["e"])(c,{title:t.$t("title")},{default:Object(s["F"])(()=>[Object(s["i"])(i,{"chart-type":"bar","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1},8,["title"])}var I,T=a("a7a0"),$=a("f433");let R=I=class extends f["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!1}}},this.datasets=[]}get labels(){const t=[];for(let e=0;e<14;e++)t.push(e);return t}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}updateData(){return Object(c["b"])(this,void 0,void 0,(function*(){const t=yield O["a"].getAll(),e=t.map(t=>T["a"].from(t)),a=Date.now(),s=new Array(14).fill(0);for(const r of e){const t=r.restoreTime;t>a&&(s[Math.floor((t-a)/I.timeDay)]+=1)}const o={data:s,backgroundColor:"royalblue",hoverBackgroundColor:"royalblue"};this.datasets=[o]}))}};R.timeDay=864e5,Object(c["c"])([Object(f["e"])("saveID")],R.prototype,"onSaved",null),R=I=Object(c["c"])([Object(f["b"])({components:{ChartBlock:j["a"],ChartView:v["a"]},i18n:{messages:$}})],R);var F=R;F.render=B;var J=F;function V(t,e,a,o,r,n){const i=Object(s["A"])("chart-view"),c=Object(s["A"])("chart-block");return Object(s["t"])(),Object(s["e"])(c,{title:t.$t("title")},{default:Object(s["F"])(()=>[Object(s["i"])(i,{"chart-type":"doughnut","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.opitons},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1},8,["title"])}var z=a("f667");let N=class extends f["d"]{constructor(){super(...arguments),this.opitons={plugins:{legend:{display:!0,position:"right"}}},this.labels=[],this.datasets=[]}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}updateData(){return Object(c["b"])(this,void 0,void 0,(function*(){const t=new Map;for(const[n,i]of k["a"].reason)t.set(n,[i,0]);const e=yield O["a"].getAll(k["a"].status.get(k["a"].StatusCode.Rejected).predicator);e.reduce((t,e)=>{if(e.status!==k["a"].StatusCode.Rejected)return t;if(e.reasons.length>0)for(const a of e.reasons)t.get(a)[1]++;else t.get(k["a"].Reason.undeclared)[1]++;return t},t);const a=[],s=[],o=[];for(const n of t.values())n[1]<1||(a.push(n[0].title),s.push(n[1]),o.push(n[0].color));const r={data:s,backgroundColor:o,borderAlign:"inner",borderColor:"rgba(0, 0, 0, 0.2)",hoverBackgroundColor:o,hoverBorderColor:"rgba(0, 0, 0, 0.4)"};this.labels=a,this.datasets=[r]}))}};Object(c["c"])([Object(f["e"])("saveID")],N.prototype,"onSaved",null),N=Object(c["c"])([Object(f["b"])({components:{ChartBlock:j["a"],ChartView:v["a"]},i18n:{messages:z}})],N);var _=N;_.render=V;var q=_;function Q(t,e,a,o,r,n){const i=Object(s["A"])("chart-view"),c=Object(s["A"])("chart-block");return Object(s["t"])(),Object(s["e"])(c,{title:t.$t("title")},{default:Object(s["F"])(()=>[Object(s["i"])(i,{"chart-type":"doughnut","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1},8,["title"])}var P,W=a("3fde");let E=P=class extends f["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!0,position:"right"}}},this.datasets=[]}get labels(){const t=[];for(const e of k["a"].status.values())t.push(e.title);return t}get saveID(){return this.$store.state.dia.saveID}created(){this.updateData()}onSaved(){this.updateData()}updateData(){return Object(c["b"])(this,void 0,void 0,(function*(){const t=new Map;for(const o of k["a"].status.keys())t.set(o,0);const e=yield O["a"].getAll();e.reduce((t,e)=>(t.set(e.status,t.get(e.status)+1),t),t);const a=[];for(const o of t.values())a.push(o);const s={data:a,backgroundColor:P.colors,borderAlign:"inner",borderColor:"rgba(0, 0, 0, 0.2)",hoverBackgroundColor:P.colors,hoverBorderColor:"rgba(0, 0, 0, 0.4)"};this.datasets=[s]}))}};E.colors=["#CAAF85","#35C572","#B0373C"],Object(c["c"])([Object(f["e"])("saveID")],E.prototype,"onSaved",null),E=P=Object(c["c"])([Object(f["b"])({components:{ChartBlock:j["a"],ChartView:v["a"]},i18n:{messages:W}})],E);var G=E;G.render=Q;var H=G,K=a("16f8");let L=class extends u["b"]{created(){l["e"].register(l["a"],l["c"],l["j"],l["m"],l["b"],l["f"],l["i"],l["d"],l["k"],l["l"],l["p"],l["q"],l["h"]),l["e"].defaults.maintainAspectRatio=!1,l["e"].defaults.plugins.legend.labels.boxWidth=10,l["e"].defaults.plugins.tooltip.intersect=!1,l["e"].defaults.elements.line.tension=.1}};L=Object(c["c"])([Object(u["a"])({components:{MaterialTopAppBar:d["a"],MaterialTopAppBarAdjust:b["a"],StatusChart:H,ReasonsChart:q,CountByMonthChart:C,IntervalChart:M,QuotasChart:J},i18n:{messages:K}})],L);var U=L;a("8e88");U.render=i;e["default"]=U},7607:function(t){t.exports=JSON.parse('{"en":{"title":"Count by Month","submissions":"Submissions","results":"Results"},"zh":{"title":"每月统计","submissions":"提交","results":"结果"}}')},8899:function(t){t.exports=JSON.parse('{"en":{"title":"Interval (Days)"},"zh":{"title":"耗时（天）"}}')},"8e88":function(t,e,a){"use strict";a("24c7")},f433:function(t){t.exports=JSON.parse('{"en":{"title":"Quotas (Days)"},"zh":{"title":"名额（天）"}}')},f667:function(t){t.exports=JSON.parse('{"en":{"title":"Reasons"},"zh":{"title":"拒绝理由"}}')}}]);
//# sourceMappingURL=charts.92f42ed0.js.map
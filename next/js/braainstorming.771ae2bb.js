(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["braainstorming"],{"0314":function(t,e,a){},"88b2":function(t,e,a){"use strict";a.r(e);var s=a("7a23");const o={key:0,class:"brainstorming"},r={key:0,class:"progress"},n=Object(s["h"])("div",null,"Updating Brainstorming",-1),i={key:1,class:"grid grid--1-1-1"};function c(t,e,a,c,l,d){const b=Object(s["x"])("material-icon-button"),u=Object(s["x"])("material-top-app-bar"),h=Object(s["x"])("material-top-app-bar-adjust"),p=Object(s["x"])("material-linear-progress"),O=Object(s["x"])("coverage-chart"),j=Object(s["x"])("rates-chart"),m=Object(s["x"])("reviews-by-month-chart");return Object(s["q"])(),Object(s["d"])(s["a"],null,[Object(s["h"])(u,{title:"Brainstorming","navi-back":""},{default:Object(s["C"])(()=>[t.canUpdate?(Object(s["q"])(),Object(s["d"])(b,{key:0,icon:"redo",onClick:t.update},null,8,["onClick"])):Object(s["e"])("",!0)]),_:1}),Object(s["h"])(h),t.$store.getters.empty?Object(s["e"])("",!0):(Object(s["q"])(),Object(s["d"])("main",o,[t.updating?(Object(s["q"])(),Object(s["d"])("div",r,[n,Object(s["h"])(p,{progress:t.$store.state.progress,determinate:""},null,8,["progress"])])):Object(s["e"])("",!0),t.idle?(Object(s["q"])(),Object(s["d"])("div",i,[Object(s["h"])(O),Object(s["h"])(j)])):Object(s["e"])("",!0),t.idle?(Object(s["q"])(),Object(s["d"])(m,{key:2})):Object(s["e"])("",!0)]))],64)}var l=a("9ab4"),d=a("9b4a"),b=(a("cadc"),a("ce1f")),u=a("6022"),h=a("42b4"),p=a("0613"),O=a("81dd"),j=a("ea0e"),m=a("2281"),f=a("4892");function g(t,e,a,o,r,n){const i=Object(s["x"])("chart-view"),c=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(c,{title:"Coverage"},{default:Object(s["C"])(()=>[Object(s["h"])(i,{"chart-type":"doughnut","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1})}var v,y=a("1b40"),C=a("ad8e"),x=a("240d"),k=a("6163");let w=v=class extends y["d"]{constructor(){super(...arguments),this.options={plugins:{legend:{display:!0,position:"right"}}},this.labels=["Covered","Not Covered"],this.datasets=[]}mounted(){this.updateData()}updateData(){return Object(l["b"])(this,void 0,void 0,(function*(){const t=this.$store.state.nominations,e=[0,0];for(const s of t)e[(yield C["a"].contains(s))?0:1]++;const a={data:e,backgroundColor:v.colors,borderAlign:"inner",borderColor:"rgba(0, 0, 0, 0.2)",hoverBackgroundColor:v.colors,hoverBorderColor:"rgba(0, 0, 0, 0.4)"};this.datasets=[a]}))}};w.colors=["royalblue","gray"],w=v=Object(l["c"])([Object(y["b"])({components:{ChartBlock:x["a"],ChartView:k["a"]}})],w);var q=w;q.render=g;var B=q;function S(t,e,a,o,r,n){const i=Object(s["x"])("chart-view"),c=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(c,{title:"Rates"},{default:Object(s["C"])(()=>[Object(s["h"])(i,{"chart-type":"radar","chart-datasets":t.datasets,"chart-labels":t.labels,"chart-options":t.options},null,8,["chart-datasets","chart-labels","chart-options"])]),_:1})}let M=class extends y["d"]{constructor(){super(...arguments),this.options={elements:{line:{tension:0}},scales:{r:{min:1,max:5,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}},this.labels=["Quality","Description","Cultural","Uniqueness","Safety","Location"],this.datasets=[]}mounted(){this.updateData()}updateData(){return Object(l["b"])(this,void 0,void 0,(function*(){const t=this.$store.state.nominations,e=[];for(let n=0;n<6;++n)e.push({count:0,rate:0});const a=(t,e)=>{if(!t)return;const a=parseInt(t);NaN!==a&&(e.count++,e.rate+=a)},s=[];for(const n of t){const t=C["a"].getFromLocal(n).then(t=>{if(t)for(const[s,o]of Object.entries(t)){if(!s.startsWith("review_"))continue;const t=o;a(t.JSON.quality,e[0]),a(t.JSON.description,e[1]),a(t.JSON.cultural,e[2]),a(t.JSON.uniqueness,e[3]),a(t.JSON.safety,e[4]),a(t.JSON.location,e[5])}});s.push(t)}yield Promise.allSettled(s);const o=e.map(t=>t.rate/t.count),r={data:o,borderColor:"royalblue"};this.datasets=[r]}))}};M=Object(l["c"])([Object(y["b"])({components:{ChartBlock:x["a"],ChartView:k["a"]}})],M);var $=M;$.render=S;var D=$;function N(t,e,a,o,r,n){const i=Object(s["x"])("chart-view"),c=Object(s["x"])("chart-block");return Object(s["q"])(),Object(s["d"])(c,{title:"Reviews by Month"},{default:Object(s["C"])(()=>[Object(s["h"])(i,{"chart-type":"line","chart-datasets":t.datasets,"chart-options":t.options},null,8,["chart-datasets","chart-options"])]),_:1})}var J=a("1315");let R=class extends y["d"]{constructor(){super(...arguments),this.options={scales:{x:{type:"time",time:{unit:"month",tooltipFormat:"yyyy-MM",displayFormats:{month:"yyyy-MM"}}}},plugins:{tooltip:{mode:"x"}}},this.datasets=[]}mounted(){this.updateData()}updateData(){return Object(l["b"])(this,void 0,void 0,(function*(){const t=this.$store.state.nominations,e=new Map;if(t.length>0){let a=J["DateTime"].fromMillis(t[0].confirmedTime).startOf("month").valueOf(),s=a;const o=[];for(const r of t){const t=C["a"].getFromLocal(r).then(t=>{var o;if(t)for(const[r,n]of Object.entries(t)){if(!r.startsWith("review_"))continue;const t=n,i=J["DateTime"].fromMillis(t.Timestamp).startOf("month").valueOf();i<a?a=i:i>s&&(s=i),e.set(i,(null!==(o=e.get(i))&&void 0!==o?o:0)+1)}});o.push(t)}yield Promise.allSettled(o),Object(x["b"])(e,a,s)}const a=[];for(const[o,r]of e)a.push({x:o,y:r});a.sort((t,e)=>t.x-e.x);const s={label:"Submissions",data:a,borderColor:"royalblue",pointBackgroundColor:"royalblue",pointRadius:0,fill:!1};this.datasets=[s]}))}};R=Object(l["c"])([Object(y["b"])({components:{ChartBlock:x["a"],ChartView:k["a"]}})],R);var T=R;T.render=N;var _=T;let A=class extends b["b"]{get canUpdate(){return!this.$store.getters.empty&&this.$store.state.status===p["a"].Status.idle}created(){d["e"].register(d["a"],d["j"],d["m"],d["f"],d["i"],d["n"],d["o"],d["k"],d["p"],d["g"],d["q"],d["h"]),d["e"].defaults.maintainAspectRatio=!1,d["e"].defaults.plugins.legend.labels.boxWidth=10,d["e"].defaults.plugins.tooltip.intersect=!1,d["e"].defaults.elements.line.tension=.1}get updating(){return this.$store.state.status===p["a"].Status.queryingBrainstorming}get idle(){return this.$store.state.status===p["a"].Status.idle}update(){return Object(l["b"])(this,void 0,void 0,(function*(){const t=yield u["a"].updateBrainstorming();h["a"].inform(`Updated ${t} records`)}))}};A=Object(l["c"])([Object(b["a"])({components:{MaterialTopAppBar:m["a"],MaterialTopAppBarAdjust:f["a"],MaterialIconButton:O["a"],MaterialLinearProgress:j["a"],CoverageChart:B,RatesChart:D,ReviewsByMonthChart:_}})],A);var U=A;a("dbda");U.render=c;e["default"]=U},dbda:function(t,e,a){"use strict";a("0314")}}]);
//# sourceMappingURL=braainstorming.771ae2bb.js.map